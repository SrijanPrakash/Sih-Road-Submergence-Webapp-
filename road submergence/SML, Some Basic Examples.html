
<!-- saved from url=(0038)http://cs.fit.edu/~ryan/sml/intro.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>SML, Some Basic Examples</title>

<style type="text/css">
.hilite {background-color: #E8E8D0}
.dialog {background-color: #E0E0E0}
</style>

</head>



<body><h1>SML, Some Basic Examples</h1>

<h2>Simple arithmetic expressions and format</h2>

The amount of white space between tokens does
not matter.
Expressions can be entered on multiple lines;

<pre class="dialog"><span class="hilite"><i>- </i></span><tt>2+3;</tt>
<span class="hilite"><i>val it = 5 : int 

- </i></span><tt>7-4;</tt>
<span class="hilite"><i>val it = 3 : int</i></span>
</pre>

<pre class="dialog"><span class="hilite"><i>- </i></span><tt>5 *                          3                 ;</tt>
<span class="hilite"><i>val it = 15 : int 

- </i></span><tt>5 * 3 ;</tt>
<span class="hilite"><i>val it = 15 : int 

- </i></span><tt>5*3;</tt>
<span class="hilite"><i>val it = 15 : int</i></span>
</pre>

<pre class="dialog"><span class="hilite"><i>- </i></span><tt>6</tt>
<span class="hilite"><i>= </i></span><tt>-1</tt>
<span class="hilite"><i>= </i></span><tt>;</tt>
<span class="hilite"><i>val it = 5 : int</i></span>
</pre>

<p>
Canonical values evaluate to themselves.

</p><pre class="dialog"><span class="hilite"><i>- </i></span><tt>6;</tt>
<span class="hilite"><i>val it = 6 : int 

- </i></span><tt>11;</tt>
<span class="hilite"><i>val it = 11 : int</i></span>
</pre>


<h2>Examples of the simple data types</h2>

ML has a rich collection of data types.
We can divide the collection of data types into three categories.
<ul>
  <li>basic data types;
      ML has six basic data types: integer, string, character, boolean, real, and unit.

  </li><li>structured data types;
Type operators combine types to form structured, or compound, types.
We talk about three built-in
type operators: tuples, records, and lists.
There is another built-in type operator for functions.

  </li><li>user-defined types;
The user-defined data types are reminiscent of
variant record types found in other programming languages.
Typically variant records are not used much in other programming languages,
but user-defined types are quite important to programming in ML.
They are quite general and encompass enumerated types as well.
</li></ul>

<h3>Integer, String, Character, Boolean, Real, Unit</h3>
<pre class="dialog"><span class="hilite"><i>- </i></span><tt>2+3; 4-5; 6*7;</tt>
<span class="hilite"><i>val it = 5 : int
val it = ~1 : int
val it = 42 : int 

- </i></span><tt>~5;            <b><i><font color="#BB1212">(* unary negation *)</font></i></b></tt>
<span class="hilite"><i>val it = ~5 : int 

- </i></span><tt>37 div 5; 37 mod 5;</tt>
<span class="hilite"><i>val it = 7 : int
val it = 2 : int 

- </i></span><tt>(3+4)*2;</tt>
<span class="hilite"><i>val it = 14 : int 

- </i></span><tt>Int.min (2+3, 2-3);  <b><i><font color="#BB1212">(* "min" is an operation from the "Int" module *)</font></i></b></tt>
<span class="hilite"><i>val it = ~1 : int 

- </i></span><tt><font color="#008B8B">"this is a string"</font>;</tt>
<span class="hilite"><i>val it = "this is a string" : string 

- </i></span><tt>size <font color="#008B8B">"string"</font>;</tt>
<span class="hilite"><i>val it = 6 : int 

- </i></span><tt>size <font color="#008B8B">""</font>;</tt>
<span class="hilite"><i>val it = 0 : int 

- </i></span><tt><font color="#008B8B">"abc"</font> ^ <font color="#008B8B">"defg"</font>;</tt>
<span class="hilite"><i>val it = "abcdefg" : string 

- </i></span><tt>#<font color="#008B8B">"A"</font>; #<font color="#008B8B">"B"</font>;</tt>
<span class="hilite"><i>val it = #"A" : char
val it = #"B" : char 

- </i></span><tt>true; false;</tt>
<span class="hilite"><i>val it = true : bool
val it = false : bool 

- </i></span><tt>not true;       <b><i><font color="#BB1212">(* boolean negation *)</font></i></b></tt>
<span class="hilite"><i>val it = false : bool 

- </i></span><tt>not false;</tt>
<span class="hilite"><i>val it = true : bool 

- </i></span><tt><b><font color="#228B22">if</font></b> true <b><font color="#228B22">then</font></b> <font color="#008B8B">"then"</font> <b><font color="#228B22">else</font></b> <font color="#008B8B">"else"</font>;</tt>
<span class="hilite"><i>val it = "then" : string 

- </i></span><tt><b><font color="#228B22">if</font></b> false <b><font color="#228B22">then</font></b> <b><font color="#228B22">if</font></b> true <b><font color="#228B22">then</font></b> 1 <b><font color="#228B22">else</font></b> 2 <b><font color="#228B22">else</font></b> <b><font color="#228B22">if</font></b> false <b><font color="#228B22">then</font></b> 3 <b><font color="#228B22">else</font></b> 4;</tt>
<span class="hilite"><i>val it = 4 : int 

- </i></span><tt><b><font color="#228B22">if</font></b> true <b><font color="#228B22">then</font></b> 2 <b><font color="#228B22">else</font></b> 37 div 0;</tt>
<span class="hilite"><i>val it = 2 : int 

- </i></span><tt><b><font color="#228B22">if</font></b> false <b><font color="#228B22">then</font></b> 37 div 0 <b><font color="#228B22">else</font></b> 3;</tt>
<span class="hilite"><i>val it = 3 : int 

- </i></span><tt>2=2 <b><font color="#228B22">orelse</font></b> 37 div 0 = 5;</tt>
<span class="hilite"><i>val it = true : bool 

- </i></span><tt>2=0 <b><font color="#228B22">andalso</font></b> 37 div 0 = 5;</tt>
<span class="hilite"><i>val it = false : bool 

- </i></span><tt>1=1;</tt>
<span class="hilite"><i>val it = true : bool 

- </i></span><tt>2=4;</tt>
<span class="hilite"><i>val it = false : bool 

- </i></span><tt><font color="#008B8B">"string"</font> = <font color="#008B8B">"string"</font>;</tt>
<span class="hilite"><i>val it = true : bool 

- </i></span><tt><b><font color="#228B22">if</font></b> 1=2 <b><font color="#228B22">then</font></b> 3 <b><font color="#228B22">else</font></b> 4;</tt>
<span class="hilite"><i>val it = 4 : int 

- </i></span><tt>3.14159;        <b><i><font color="#BB1212">(* an approximation of pi *)</font></i></b></tt>
<span class="hilite"><i>val it = 3.14159 : real 

- </i></span><tt>123.456E7;</tt>
<span class="hilite"><i>val it = 1234560000.0 : real 

- </i></span><tt>1.2 + 3.4;      <b><i><font color="#BB1212">(* '+' overloaded: int and real *)</font></i></b></tt>
<span class="hilite"><i>val it = 4.6 : real 

- </i></span><tt>1.2 - 3.4;</tt>
<span class="hilite"><i>val it = ~2.2 : real 

- </i></span><tt>1.2 * 3.4;</tt>
<span class="hilite"><i>val it = 4.08 : real 

- </i></span><tt>7.2 / 4.8;</tt>
<span class="hilite"><i>val it = 1.5 : real 

- </i></span><tt>3.1415926535;      <b><i><font color="#BB1212">(* an approximation of pi *)</font></i></b></tt>
<span class="hilite"><i>val it = 3.1415926535 : real 

- </i></span><tt>2.7182818284;</tt>
<span class="hilite"><i>val it = 2.7182818284 : real 

- </i></span><tt>Math.e;</tt>
<span class="hilite"><i>val it = 2.71828182846 : real 

- </i></span><tt>Math.cos (Math.pi/2.0);</tt>
<span class="hilite"><i>val it = 0.0 : real 

- </i></span><tt>Math.sqrt (49.01);</tt>
<span class="hilite"><i>val it = 7.00071424927 : real 

- </i></span><tt>Int.min (ceil 3.4, floor 3.4);</tt>
<span class="hilite"><i>val it = 3 : int 

- </i></span><tt>();</tt>
<span class="hilite"><i>val it = () : unit</i></span>
</pre>


<h3>Tuples, Records, Lists</h3>

<h4>Tuples</h4>
Tuples are structured data types
of heterogeneous elements listed in order.

<pre class="dialog"><span class="hilite"><i>- </i></span><tt>(true, (), 1);</tt>
<span class="hilite"><i>val it = (true,(),1) : bool * unit * int 

- </i></span><tt>(2, <font color="#008B8B">"ab"</font>, 2*2, 5.0);</tt>
<span class="hilite"><i>val it = (2,"ab",4,5.0) : int * string * int * real 

- </i></span><tt>( 2 );    <b><i><font color="#BB1212">(* No such thing as a one-tuple *)</font></i></b></tt>
<span class="hilite"><i>val it = 2 : int 

- </i></span><tt>((()));</tt>
<span class="hilite"><i>val it = () : unit 

- </i></span><tt>((2,3,4), (true,3.3));</tt>
<span class="hilite"><i>val it = ((2,3,4),(true,3.3)) : (int * int * int) * (bool * real) 

- </i></span><tt>#2 (<font color="#008B8B">"one"</font>, 2, <font color="#008B8B">"three"</font>);  <b><i><font color="#BB1212">(* projection *)</font></i></b></tt>
<span class="hilite"><i>val it = 2 : int</i></span>
</pre>

<h4>Records</h4>

Records are structrured data types
of heterogeneous elements that are labeled.
The labels allow elements to be written in any order.
<pre class="dialog"><span class="hilite"><i>- </i></span><tt>{abscissa=1.2, ordinate=3.2};</tt>
<span class="hilite"><i>val it = {abscissa=1.2,ordinate=3.2} : {abscissa:real, ordinate:real} 

- </i></span><tt>{make=<font color="#008B8B">"Toyota"</font>, model=<font color="#008B8B">"Corolla"</font>, year=1986, color=<font color="#008B8B">"silver"</font>};</tt>
<span class="hilite"><i>val it = {color="silver",make="Toyota",model="Corolla",year=1986}
  : {color:string, make:string, model:string, year:int} 

- </i></span><tt>{x_dim=2, y_dim=3} = {y_dim=3, x_dim=2}; <b><i><font color="#BB1212">(* order irrelevant *)</font></i></b></tt>
<span class="hilite"><i>val it = true : bool 

- </i></span><tt>{a = (), b = 2, c = (<font color="#008B8B">"s"</font>,2), d = 1};</tt>
<span class="hilite"><i>val it = {a=(),b=2,c=("s",2),d=1} : {a:unit, b:int, c:string * int, d:int} 

- </i></span><tt>{a = 2.3, b = {a=<font color="#008B8B">"s"</font>,c=45}};</tt>
<span class="hilite"><i>val it = {a=2.3,b={a="s",c=45}} : {a:real, b:{a:string, c:int}} 

- </i></span><tt>{one = (2.3, <font color="#008B8B">"string"</font>)};</tt>
<span class="hilite"><i>val it = {one=(2.3,"string")} : {one:real * string} 

- </i></span><tt>{1=(), 2=true, 3=1};   <b><i><font color="#BB1212">(* n-tuples are records *)</font></i></b></tt>
<span class="hilite"><i>val it = ((),true,1) : unit * bool * int 

- </i></span><tt>{1=(), 3=1, 2=true};</tt>
<span class="hilite"><i>val it = ((),true,1) : unit * bool * int 

- </i></span><tt>{1=(), 3=1};</tt>
<span class="hilite"><i>val it = {1=(),3=1} : {1:unit, 3:int} 

- </i></span><tt>{34564=1, b=2, b3=3, &lt;*&gt; =4};</tt>
<span class="hilite"><i>val it = {34564=1,&lt;*&gt;=4,b=2,b3=3} : {34564:int, &lt;*&gt;:int, b:int, b3:int} 

- </i></span><tt>{1=1, 01=01, 001=001}            <b><i><font color="#BB1212">(* Error! *)</font></i></b></tt>
<span class="hilite"><i>stdIn:23.5-23.10 Error: syntax error: deleting  COMMA INT0 EQUALOP 

- </i></span><tt>#a {a=3};                  <b><i><font color="#BB1212">(* field selection *)</font></i></b></tt>
<span class="hilite"><i>val it = 3 : int 

- </i></span><tt># a{z=1.2, a=3, b=true, 4=()};</tt>
<span class="hilite"><i>val it = 3 : int 

- </i></span><tt>#a (#b {b={a=3}});</tt>
<span class="hilite"><i>val it = 3 : int 

- </i></span><tt><b><font color="#228B22">let</font></b> <b><font color="#228B22">val</font></b> r = {r=3} <b><font color="#228B22">in</font></b> # r r <b><font color="#228B22">end</font></b>;</tt>
<span class="hilite"><i>val it = 3 : int 

- </i></span><tt><b><font color="#228B22">let</font></b> <b><font color="#228B22">val</font></b> ### = 3 <b><font color="#228B22">in</font></b> # ## {## = ###} <b><font color="#228B22">end</font></b>;</tt>
<span class="hilite"><i>val it = 3 : int</i></span>
</pre>
Numbers are allowed as labels in ML records.
And these make it possible to treat tuples as
as special case of records.
The case where the labels are implicit
with numbers in order.

<h4>Lists</h4>

All elements of a list have the same type.
<pre class="dialog"><span class="hilite"><i>- </i></span><tt>[1,2,3,4];</tt>
<span class="hilite"><i>val it = [1,2,3,4] : int list 

- </i></span><tt>[true,false,false];</tt>
<span class="hilite"><i>val it = [true,false,false] : bool list 

- </i></span><tt>[<font color="#008B8B">"a"</font>,<font color="#008B8B">"bc"</font>,<font color="#008B8B">"def"</font>,<font color="#008B8B">"ghij"</font>];</tt>
<span class="hilite"><i>val it = ["a","bc","def","ghij"] : string list 

- </i></span><tt>[(8,true),(5,false)];</tt>
<span class="hilite"><i>val it = [(8,true),(5,false)] : (int * bool) list 

- </i></span><tt>[1,2,3.14159,4];   <b><i><font color="#BB1212">(* Error! *)</font></i></b></tt>
<span class="hilite"><i>stdIn:17.1-17.16 Error: operator and operand don't agree [literal]
  operator domain: real * real list
  operand:         real * int list
  in expression:
    3.14159 :: 4 :: nil 

- </i></span><tt>1 :: [2,3,4]; 1 :: 2 :: [3,4];  <b><i><font color="#BB1212">(* binary, infix "cons" op *)</font></i></b></tt>
<span class="hilite"><i>val it = [1,2,3,4] : int list
val it = [1,2,3,4] : int list 

- </i></span><tt>[1,2,3] @ [4,5];                <b><i><font color="#BB1212">(* binary, infix append op *)</font></i></b></tt>
<span class="hilite"><i>val it = [1,2,3,4,5] : int list 

- </i></span><tt>[(<font color="#008B8B">"abcd"</font>, 4), (<font color="#008B8B">"xyz"</font>, 3)];</tt>
<span class="hilite"><i>val it = [("abcd",4),("xyz",3)] : (string * int) list 

- </i></span><tt>([<font color="#008B8B">"abcd"</font>, <font color="#008B8B">"xyz"</font>], [4, 3,2,1]);</tt>
<span class="hilite"><i>val it = (["abcd","xyz"],[4,3,2,1]) : string list * int list 

- </i></span><tt>[[2,4,6], [2,3,5,7], [2,4,8,16,32]];</tt>
<span class="hilite"><i>val it = [[2,4,6],[2,3,5,7],[2,4,8,16,32]] : int list list</i></span>
</pre>

The notation with the square brackets is just a special syntax
of building up lists using the constructors <code>::</code> and <code>nil</code>.
<pre class="dialog"><span class="hilite"><i>- </i></span><tt>1::2::3::4::nil;</tt>
<span class="hilite"><i>val it = [1,2,3,4] : int list 

- </i></span><tt>true::false::false::nil;</tt>
<span class="hilite"><i>val it = [true,false,false] : bool list 

- </i></span><tt><font color="#008B8B">"a"</font>::<font color="#008B8B">"bc"</font>::<font color="#008B8B">"def"</font>::<font color="#008B8B">"ghij"</font>::nil;</tt>
<span class="hilite"><i>val it = ["a","bc","def","ghij"] : string list 

- </i></span><tt>(8,true)::(5,false)::nil;</tt>
<span class="hilite"><i>val it = [(8,true),(5,false)] : (int * bool) list 

- </i></span><tt>(2::4::6::nil) :: (2::3::5::7::nil) :: (2::4::8::16::32::nil) :: nil;</tt>
<span class="hilite"><i>val it = [[2,4,6],[2,3,5,7],[2,4,8,16,32]] : int list list</i></span>
</pre>

It is important in SML to distinguish constructors from ordinary functions.
Constructors are the primitive functions that create new values of a data.
For example, the constructors for lists are
<code>::</code> and <code>nil</code>.
The append function <code>@</code> is not a constructor
(it can be defined using <code>::</code> and <code>nil</code>).


<h2>Bindings</h2>

Values can be bound to names using
value declarations.
Value declarations are introduced by the keyword <tt>val</tt>.


<pre class="dialog"><span class="hilite"><i>- </i></span><tt><b><font color="#228B22">val</font></b> a = 2;            <b><i><font color="#BB1212">(* Bind the value 2 to a.               *)</font></i></b></tt>
<span class="hilite"><i>val a = 2 : int 

- </i></span><tt>a;                    <b><i><font color="#BB1212">(* Respond with the value of a.         *)</font></i></b></tt>
<span class="hilite"><i>val it = 2 : int 

- </i></span><tt>3*a + 4*a*a;          <b><i><font color="#BB1212">(* Use the value of a in an expression. *)</font></i></b></tt>
<span class="hilite"><i>val it = 22 : int 

- </i></span><tt><b><font color="#228B22">val</font></b> b = 3 * 4 + 5;</tt>
<span class="hilite"><i>val b = 17 : int 

- </i></span><tt><b><font color="#228B22">val</font></b> c = 2 * b;        <b><i><font color="#BB1212">(* Use value of b in binding of c.      *)</font></i></b></tt>
<span class="hilite"><i>val c = 34 : int 

- </i></span><tt><b><font color="#228B22">val</font></b> a = 3;          <b><i><font color="#BB1212">(* This binding hides previous bindings.  *)</font></i></b></tt>
<span class="hilite"><i>val a = 3 : int 

- </i></span><tt>a;                  <b><i><font color="#BB1212">(* Respond with value of visible binding. *)</font></i></b></tt>
<span class="hilite"><i>val it = 3 : int 

- </i></span><tt><b><font color="#228B22">val</font></b> &lt;=&gt; = (~1,0,1);              <b><i><font color="#BB1212">(* A symbolic identifier &lt;=&gt; *)</font></i></b></tt>
<span class="hilite"><i>val &lt;=&gt; = (~1,0,1) : int * int * int 

- </i></span><tt>6*5*4;            <b><i><font color="#BB1212">(* Expressions are really bindings to "it". *)</font></i></b></tt>
<span class="hilite"><i>val it = 120 : int 

- </i></span><tt><b><font color="#228B22">val</font></b> c = it div (3*2);</tt>
<span class="hilite"><i>val c = 20 : int 

- </i></span><tt>it;</tt>
<span class="hilite"><i>val it = 120 : int 

- </i></span><tt><b><font color="#228B22">val</font></b> a = 4;                         <b><i><font color="#BB1212">(* Global binding to a.    *)</font></i></b></tt>
<span class="hilite"><i>val a = 4 : int 

- </i></span><tt><b><font color="#228B22">let</font></b> <b><font color="#228B22">val</font></b> a = 5 <b><font color="#228B22">in</font></b> a+6 <b><font color="#228B22">end</font></b>;          <b><i><font color="#BB1212">(* Local binding to a.     *)</font></i></b></tt>
<span class="hilite"><i>val it = 11 : int 

- </i></span><tt>a;                                 <b><i><font color="#BB1212">(* No change in a.         *)</font></i></b></tt>
<span class="hilite"><i>val it = 4 : int 

- </i></span><tt><b><font color="#228B22">let</font></b> <b><font color="#228B22">val</font></b> p = 87187 * 3797 <b><font color="#228B22">in</font></b> (p, p+2, p+4) <b><font color="#228B22">end</font></b>;</tt>
<span class="hilite"><i>val it = (331049039,331049041,331049043) : int * int * int 

- </i></span><tt><b><font color="#228B22">val</font></b> pi2 = <b><font color="#228B22">let</font></b> <b><font color="#228B22">val</font></b> pi = 3.14 <b><font color="#228B22">in</font></b> 2.0 * pi <b><font color="#228B22">end</font></b>;</tt>
<span class="hilite"><i>val pi2 = 6.28 : real</i></span>
</pre>

<pre class="dialog"><span class="hilite"><i>- </i></span><tt><b><font color="#228B22">local</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">val</font></b> pi = 3.14</tt>
<span class="hilite"><i>= </i></span><tt><b><font color="#228B22">in</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">val</font></b> pi2 = 2.0 * pi</tt>
<span class="hilite"><i>= </i></span><tt><b><font color="#228B22">end</font></b>;</tt>
<span class="hilite"><i>val pi2 = 6.28 : real 

- </i></span><tt><b><font color="#228B22">val</font></b> a = 0 <b><font color="#228B22">and</font></b> b = 1 <b><font color="#228B22">and</font></b> c = 7.8;</tt>
<span class="hilite"><i>val a = 0 : int
val b = 1 : int
val c = 7.8 : real 

- </i></span><tt><b><font color="#228B22">let</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">val</font></b> c = 3 <b><font color="#228B22">and</font></b> d = 4    <b><i><font color="#BB1212">(* Two local, independent bindings.  *)</font></i></b></tt>
<span class="hilite"><i>= </i></span><tt><b><font color="#228B22">in</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  (c * d) div 3</tt>
<span class="hilite"><i>= </i></span><tt><b><font color="#228B22">end</font></b>;</tt>
<span class="hilite"><i>val it = 4 : int 

- </i></span><tt><b><font color="#228B22">let</font></b> <b><font color="#228B22">val</font></b> e = 5 <b><font color="#228B22">and</font></b> f = e+1 <b><font color="#228B22">in</font></b> e+f <b><font color="#228B22">end</font></b>;  <b><i><font color="#BB1212">(* Error! *)</font></i></b></tt>
<span class="hilite"><i>stdIn:24.23 Error: unbound variable or constructor: e 

- </i></span><tt><b><font color="#228B22">let</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">val</font></b> c = 3; <b><font color="#228B22">val</font></b> d = c+1;     <b><i><font color="#BB1212">(* These bindings are dependent *)</font></i></b></tt>
<span class="hilite"><i>= </i></span><tt><b><font color="#228B22">in</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  (c * d) div 3</tt>
<span class="hilite"><i>= </i></span><tt><b><font color="#228B22">end</font></b>;</tt>
<span class="hilite"><i>val it = 4 : int 

- </i></span><tt><b><font color="#228B22">let</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">val</font></b> c = 3</tt>
<span class="hilite"><i>= </i></span><tt><b><font color="#228B22">in</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">let</font></b> <b><font color="#228B22">val</font></b> d = c+1 <b><font color="#228B22">in</font></b> (c * d) div 3 <b><font color="#228B22">end</font></b></tt>
<span class="hilite"><i>= </i></span><tt><b><font color="#228B22">end</font></b>;</tt>
<span class="hilite"><i>val it = 4 : int</i></span>
</pre>

<h2>Patterns</h2>

An unsual feature of SML is that declarations are not simply
bindings to identifiers,
but bindings to all the identifiers in a pattern.
This permits data strucutures to be picked apart and
is especially useful in defining functions
(as seen later).

<pre class="dialog"><span class="hilite"><i>- </i></span><tt><b><font color="#228B22">val</font></b> (fst, snd) = (4, 4.45);</tt>
<span class="hilite"><i>val fst = 4 : int
val snd = 4.45 : real 

- </i></span><tt><b><font color="#228B22">val</font></b> (a,b,c) = (1,3,6);  <b><i><font color="#BB1212">(* Matching in declaration *)</font></i></b></tt>
<span class="hilite"><i>val a = 1 : int
val b = 3 : int
val c = 6 : int 

- </i></span><tt><b><font color="#228B22">val</font></b> {1=a, 2=b, 3=c} = {1=1,2=3,3=6};</tt>
<span class="hilite"><i>val a = 1 : int
val b = 3 : int
val c = 6 : int 

- </i></span><tt><b><font color="#228B22">val</font></b> {abscissa=x, ordinate=y} = {abscissa=1.2, ordinate=3.2};</tt>
<span class="hilite"><i>val x = 1.2 : real
val y = 3.2 : real 

- </i></span><tt><b><font color="#228B22">val</font></b> {abscissa=x, ordinate=y} = {ordinate=3.2, abscissa=1.2};</tt>
<span class="hilite"><i>val x = 1.2 : real
val y = 3.2 : real 

- </i></span><tt><b><font color="#228B22">val</font></b> {b=x, ...} = {a=2, b=<font color="#008B8B">"s"</font>, c=3.4, d=[1,2]};</tt>
<span class="hilite"><i>val x = "s" : string 

- </i></span><tt><b><font color="#228B22">val</font></b> {2=x, ...} = (1,2,3);</tt>
<span class="hilite"><i>val x = 2 : int 

- </i></span><tt><b><font color="#228B22">val</font></b> {frac=x, ...} = Real.split 37.4321;</tt>
<span class="hilite"><i>val x = 0.4321 : real 

- </i></span><tt><b><font color="#228B22">val</font></b> x = 3;</tt>
<span class="hilite"><i>val x = 3 : int 

- </i></span><tt><b><font color="#228B22">val</font></b> (x,x) = (2,3);                     <b><i><font color="#BB1212">(* Error! *)</font></i></b></tt>
<span class="hilite"><i>stdIn:22.1-22.18 Error: duplicate variable in pattern(s): x 

- </i></span><tt><b><font color="#228B22">val</font></b> (head::rest) = 3*4;                <b><i><font color="#BB1212">(* Error! *)</font></i></b></tt>
<span class="hilite"><i>stdIn:1.1-2.18 Error: pattern and expression in val dec don't agree [literal]
  pattern:    'Z list
  expression:    int
  in declaration:
    head :: rest =
      (case (3 * 4)
        of head :: rest =&gt; (head,rest)) 

- </i></span><tt><b><font color="#228B22">val</font></b> (head::rest) = [1,2,3] @ [4,5,6];</tt>
<span class="hilite"><i>stdIn:1.1-2.32 Warning: binding not exhaustive
          head :: rest = ...
val head = 1 : int
val rest = [2,3,4,5,6] : int list 

- </i></span><tt><b><font color="#228B22">val</font></b> (head::rest) = [] @ (tl [1]);      <b><i><font color="#BB1212">(* Runtime error!   *)</font></i></b></tt>
<span class="hilite"><i>stdIn:23.1-23.33 Warning: binding not exhaustive
          head :: rest = ...

uncaught exception nonexhaustive binding failure
  raised at: stdIn:23.1-23.33 

- </i></span><tt><b><font color="#228B22">val</font></b> (x,_,y) = (1,2,3);                 <b><i><font color="#BB1212">(* wildcard pattern *)</font></i></b></tt>
<span class="hilite"><i>val x = 1 : int
val y = 3 : int 

- </i></span><tt><b><font color="#228B22">val</font></b> (x,_,y,_) = (1,2,3,4);</tt>
<span class="hilite"><i>val x = 1 : int
val y = 3 : int 

- </i></span><tt><b><font color="#228B22">val</font></b> head :: _ = [1, 2, 3];</tt>
<span class="hilite"><i>stdIn:25.1-25.26 Warning: binding not exhaustive
          head :: _ = ...
val head = 1 : int 

- </i></span><tt><b><font color="#228B22">val</font></b> x <b><font color="#228B22">as</font></b> (fst,snd) = (2, true);        <b><i><font color="#BB1212">(* layered pattern   *)</font></i></b></tt>
<span class="hilite"><i>val x = (2,true) : int * bool
val fst = 2 : int
val snd = true : bool 

- </i></span><tt><b><font color="#228B22">val</font></b> list <b><font color="#228B22">as</font></b> head :: tail = [1, 2, 3];</tt>
<span class="hilite"><i>stdIn:27.1-27.37 Warning: binding not exhaustive
          list as head :: tail = ...
val list = [1,2,3] : int list
val head = 1 : int
val tail = [2,3] : int list 

- </i></span><tt><b><font color="#228B22">val</font></b> (x,1) = (7,1);</tt>
<span class="hilite"><i>stdIn:28.1-28.18 Warning: binding not exhaustive
          (x,1) = ...
val x = 7 : int 

- </i></span><tt><b><font color="#228B22">val</font></b> 1 = 1;</tt>
<span class="hilite"><i>stdIn:29.1-29.10 Warning: binding not exhaustive
          1 = ... 

- </i></span><tt><b><font color="#228B22">val</font></b> 1 = 2;                <b><i><font color="#BB1212">(* Runtime error! *)</font></i></b></tt>
<span class="hilite"><i>stdIn:30.1-30.10 Warning: binding not exhaustive
          1 = ...

uncaught exception nonexhaustive binding failure
  raised at: stdIn:30.1-30.10 

- </i></span><tt><b><font color="#228B22">val</font></b> (x,y,_)::_ = [(2,3,4),(5,6,7)];</tt>
<span class="hilite"><i>stdIn:1.1-2.30 Warning: binding not exhaustive
          (x,y,_) :: _ = ...
val x = 2 : int
val y = 3 : int</i></span>
</pre>

Only certain functions, constructors, can be used in patterns.
<code>::</code> is a constructor, hence it can be use in a pattern.
<code>@</code> is not.  Neither is <code>+</code>.

<h2>Functions</h2>

<pre class="dialog"><span class="hilite"><i>- </i></span><tt>(<b><font color="#228B22">fn</font></b> x =&gt; x+1);       <b><i><font color="#BB1212">(* A function object: successor function *)</font></i></b></tt>
<span class="hilite"><i>val it = fn : int -&gt; int 

- </i></span><tt><b><font color="#228B22">val</font></b> f = (<b><font color="#228B22">fn</font></b> x =&gt; x+1);  <b><i><font color="#BB1212">(* Bind f to the successor function   *)</font></i></b></tt>
<span class="hilite"><i>val f = fn : int -&gt; int 

- </i></span><tt>f;</tt>
<span class="hilite"><i>val it = fn : int -&gt; int 

- </i></span><tt>f (2);                 <b><i><font color="#BB1212">(* Function application               *)</font></i></b></tt>
<span class="hilite"><i>val it = 3 : int 

- </i></span><tt>f 2;                   <b><i><font color="#BB1212">(* Parens not needed, if arg a token. *)</font></i></b></tt>
<span class="hilite"><i>val it = 3 : int 

- </i></span><tt>3 2;                   <b><i><font color="#BB1212">(* Type error!  *)</font></i></b></tt>
<span class="hilite"><i>stdIn:18.1-18.4 Error: operator is not a function [literal]
  operator: int
  in expression:
    3 2 

- </i></span><tt>f (true);              <b><i><font color="#BB1212">(* Type error!  *)</font></i></b></tt>
<span class="hilite"><i>stdIn:1.1-2.4 Error: operator and operand don't agree [tycon mismatch]
  operator domain: int
  operand:         bool
  in expression:
    f true 

- </i></span><tt>f 2 * 4;               <b><i><font color="#BB1212">(* Application binds tightest.        *)</font></i></b></tt>
<span class="hilite"><i>val it = 12 : int 

- </i></span><tt>(<b><font color="#228B22">fn</font></b> x =&gt; x+1) 8;       <b><i><font color="#BB1212">(* Name not needed to apply to arg    *)</font></i></b></tt>
<span class="hilite"><i>val it = 9 : int 

- </i></span><tt><b><font color="#228B22">val</font></b> f = (<b><font color="#228B22">fn</font></b> n =&gt; n+1); <b><i><font color="#BB1212">(* Definition of the function f.      *)</font></i></b></tt>
<span class="hilite"><i>val f = fn : int -&gt; int 

- </i></span><tt><b><font color="#228B22">fun</font></b> f (n) = n+1;       <b><i><font color="#BB1212">(* Same function, alternative syntax. *)</font></i></b></tt>
<span class="hilite"><i>val f = fn : int -&gt; int 

- </i></span><tt><b><font color="#228B22">fun</font></b> sq (x:real) = x*x;</tt>
<span class="hilite"><i>val sq = fn : real -&gt; real 

- </i></span><tt><b><font color="#228B22">fun</font></b> abs n = <b><font color="#228B22">if</font></b> n&lt;0 <b><font color="#228B22">then</font></b> ~n <b><font color="#228B22">else</font></b> n;</tt>
<span class="hilite"><i>val abs = fn : int -&gt; int 

- </i></span><tt>[<b><font color="#228B22">fn</font></b> n=&gt;n+1, <b><font color="#228B22">fn</font></b> m=&gt;2*m, <b><font color="#228B22">fn</font></b> n=&gt;n div 2];</tt>
<span class="hilite"><i>val it = [fn,fn,fn] : (int -&gt; int) list 

- </i></span><tt>(<b><font color="#228B22">fn</font></b> n=&gt;2*n,<b><font color="#228B22">fn</font></b> r=&gt;ceil r);</tt>
<span class="hilite"><i>val it = (fn,fn) : (int -&gt; int) * (real -&gt; int) 

- </i></span><tt>((<b><font color="#228B22">fn</font></b> x=&gt;x+2) 4, (<b><font color="#228B22">fn</font></b> x=&gt;x*3) 7);</tt>
<span class="hilite"><i>val it = (6,21) : int * int 

- </i></span><tt><b><font color="#228B22">fun</font></b> f(x) = x+2; <b><font color="#228B22">fun</font></b> g(x) = x*3;  <b><i><font color="#BB1212">(* h, j use these functions. *)</font></i></b></tt>
<span class="hilite"><i>val f = fn : int -&gt; int
val g = fn : int -&gt; int 

- </i></span><tt>(f(4), g(7));</tt>
<span class="hilite"><i>val it = (6,21) : int * int 

- </i></span><tt><b><font color="#228B22">fun</font></b> h (x) = (f x, g x);  h (4);  h (7);   <b><i><font color="#BB1212">(* functions and tuples. *)</font></i></b></tt>
<span class="hilite"><i>val h = fn : int -&gt; int * int
val it = (6,12) : int * int
val it = (9,21) : int * int 

- </i></span><tt><b><font color="#228B22">fun</font></b> j (x) = [f x, g x];  j (4);  j (7);   <b><i><font color="#BB1212">(* functions and lists.  *)</font></i></b></tt>
<span class="hilite"><i>val j = fn : int -&gt; int list
val it = [6,12] : int list
val it = [9,21] : int list 

- </i></span><tt>#1 (<b><font color="#228B22">fn</font></b> x =&gt; x+1, <b><font color="#228B22">fn</font></b> y =&gt; y-1) 8;</tt>
<span class="hilite"><i>val it = 9 : int 

- </i></span><tt><b><font color="#228B22">val</font></b> a = 1;             <b><i><font color="#BB1212">(* SML uses static binding     *)</font></i></b></tt>
<span class="hilite"><i>val a = 1 : int 

- </i></span><tt><b><font color="#228B22">fun</font></b> f(x) = x+a;  f(4);</tt>
<span class="hilite"><i>val f = fn : int -&gt; int
val it = 5 : int 

- </i></span><tt><b><font color="#228B22">val</font></b> a = 3;</tt>
<span class="hilite"><i>val a = 3 : int 

- </i></span><tt>f(4);                  <b><i><font color="#BB1212">(* f(4) still has the value 5. *)</font></i></b></tt>
<span class="hilite"><i>val it = 5 : int 

- </i></span><tt><b><font color="#228B22">let</font></b> <b><font color="#228B22">val</font></b> a = 1 <b><font color="#228B22">in</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">let</font></b> <b><font color="#228B22">fun</font></b> f(x) = x+a <b><font color="#228B22">in</font></b></tt>
<span class="hilite"><i>= </i></span><tt>    <b><font color="#228B22">let</font></b> <b><font color="#228B22">val</font></b> a = 3 <b><font color="#228B22">in</font></b></tt>
<span class="hilite"><i>= </i></span><tt>      f(4)</tt>
<span class="hilite"><i>= </i></span><tt>    <b><font color="#228B22">end</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">end</font></b></tt>
<span class="hilite"><i>= </i></span><tt><b><font color="#228B22">end</font></b>;</tt>
<span class="hilite"><i>val it = 5 : int</i></span>
</pre>

<h3>Recursive Functions</h3>
<pre class="dialog"><span class="hilite"><i>- </i></span><tt><b><font color="#228B22">fun</font></b> fact (n) = <b><font color="#228B22">if</font></b> n=0 <b><font color="#228B22">then</font></b> 1 <b><font color="#228B22">else</font></b> n*fact(n-1);</tt>
<span class="hilite"><i>val fact = fn : int -&gt; int 

- </i></span><tt>fact (8);</tt>
<span class="hilite"><i>val it = 40320 : int 

- </i></span><tt><b><font color="#228B22">val</font></b> fact' = (<b><font color="#228B22">fn</font></b> n =&gt; <b><font color="#228B22">if</font></b> n=0 <b><font color="#228B22">then</font></b> 1 <b><font color="#228B22">else</font></b> n*fact'(n-1));  <b><i><font color="#BB1212">(* Error! *)</font></i></b></tt>
<span class="hilite"><i>stdIn:15.43-15.48 Error: unbound variable or constructor: fact' 

- </i></span><tt><b><font color="#228B22">val</font></b> <b><font color="#228B22">rec</font></b> fact = (<b><font color="#228B22">fn</font></b> n =&gt; <b><font color="#228B22">if</font></b> n=0 <b><font color="#228B22">then</font></b> 1 <b><font color="#228B22">else</font></b> n*fact(n-1));</tt>
<span class="hilite"><i>val fact = fn : int -&gt; int 

- </i></span><tt><b><font color="#228B22">fun</font></b> gcd (n,m) = <b><font color="#228B22">if</font></b> m=0 <b><font color="#228B22">then</font></b> n <b><font color="#228B22">else</font></b> gcd (m,n mod m);</tt>
<span class="hilite"><i>val gcd = fn : int * int -&gt; int 

- </i></span><tt><b><font color="#228B22">fun</font></b> exp (b,n) = <b><font color="#228B22">if</font></b> n=0 <b><font color="#228B22">then</font></b> 1.0 <b><font color="#228B22">else</font></b> b * exp (b,n-1);</tt>
<span class="hilite"><i>val exp = fn : real * int -&gt; real 

- </i></span><tt><b><font color="#228B22">fun</font></b> mc91 (n) = <b><font color="#228B22">if</font></b> n&gt;100 <b><font color="#228B22">then</font></b> n-10 <b><font color="#228B22">else</font></b> mc91 (mc91 (n+11));  <b><i><font color="#BB1212">(* McCarthy's 91 fun *)</font></i></b></tt>
<span class="hilite"><i>val mc91 = fn : int -&gt; int 

- </i></span><tt>map mc91 [103, 102, 101, 100, 99, 98, 97, 96];</tt>
<span class="hilite"><i>val it = [93,92,91,91,91,91,91,91] : int list 

- </i></span><tt><b><font color="#228B22">fun</font></b> alt n = <b><font color="#228B22">if</font></b> n&gt;100 <b><font color="#228B22">then</font></b> n-10 <b><font color="#228B22">else</font></b> 91;</tt>
<span class="hilite"><i>val alt = fn : int -&gt; int 

- </i></span><tt>mc91(95)=alt(95); mc91(90)=alt(90); mc91(20)=alt(20);</tt>
<span class="hilite"><i>val it = true : bool
val it = true : bool
val it = true : bool 

- </i></span><tt><b><font color="#228B22">fun</font></b>                        <b><i><font color="#BB1212">(* mutually recursive function definitions *)</font></i></b></tt>
<span class="hilite"><i>= </i></span><tt>  odd (n) = <b><font color="#228B22">if</font></b> n=0 <b><font color="#228B22">then</font></b> false <b><font color="#228B22">else</font></b> even (n-1)</tt>
<span class="hilite"><i>= </i></span><tt><b><font color="#228B22">and</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  even (n) = <b><font color="#228B22">if</font></b> n=0 <b><font color="#228B22">then</font></b> true <b><font color="#228B22">else</font></b> odd (n-1);</tt>
<span class="hilite"><i>val odd = fn : int -&gt; bool
val even = fn : int -&gt; bool 

- </i></span><tt><b><font color="#228B22">fun</font></b>                        <b><i><font color="#BB1212">(* mutually recursive function definitions *)</font></i></b></tt>
<span class="hilite"><i>= </i></span><tt>  take nil = nil | take (x::xs) = x::(skip xs)</tt>
<span class="hilite"><i>= </i></span><tt><b><font color="#228B22">and</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  skip nil = nil | skip (x::xs) = take xs;</tt>
<span class="hilite"><i>val take = fn : 'a list -&gt; 'a list
val skip = fn : 'a list -&gt; 'a list 

- </i></span><tt>take [1,2,3];  skip [1,2,3,4];</tt>
<span class="hilite"><i>val it = [1,3] : int list
val it = [2,4] : int list</i></span>
</pre>


<h3>Functions and Patterns</h3>
<pre class="dialog"><span class="hilite"><i>- </i></span><tt><b><font color="#228B22">fun</font></b> f (x:int*int) = (#1 x) div (#2 x);</tt>
<span class="hilite"><i>val f = fn : int * int -&gt; int 

- </i></span><tt>f (12,3);         <b><i><font color="#BB1212">(* function f applied to pair (12,3)  *)</font></i></b></tt>
<span class="hilite"><i>val it = 4 : int 

- </i></span><tt><b><font color="#228B22">val</font></b> p = (12,3);   <b><i><font color="#BB1212">(* define a pair p                    *)</font></i></b></tt>
<span class="hilite"><i>val p = (12,3) : int * int 

- </i></span><tt>f p;              <b><i><font color="#BB1212">(* function f applied to pair p       *)</font></i></b></tt>
<span class="hilite"><i>val it = 4 : int 

- </i></span><tt><b><font color="#228B22">fun</font></b> f (x,y) = x div y;</tt>
<span class="hilite"><i>val f = fn : int * int -&gt; int 

- </i></span><tt><b><font color="#228B22">fun</font></b> g (x,y,z) = x+2*y*z;</tt>
<span class="hilite"><i>val g = fn : int * int * int -&gt; int 

- </i></span><tt><b><font color="#228B22">fun</font></b> h (x,y) = (x div y, x mod y);</tt>
<span class="hilite"><i>val h = fn : int * int -&gt; int * int 

- </i></span><tt><b><font color="#228B22">fun</font></b> roots (a,b,c) =</tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">let</font></b></tt>
<span class="hilite"><i>= </i></span><tt>    <b><font color="#228B22">val</font></b> d = Math.sqrt (b*b - 4.0*a*c)</tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">in</font></b></tt>
<span class="hilite"><i>= </i></span><tt>    ((~b + d) / (2.0*a), (~b - d) / (2.0*a))</tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">end</font></b>;</tt>
<span class="hilite"><i>val roots = fn : real * real * real -&gt; real * real 

- </i></span><tt>roots(1.0,2.0,~1.2);</tt>
<span class="hilite"><i>val it = (0.483239697419,~2.48323969742) : real * real 

- </i></span><tt><b><font color="#228B22">let</font></b> <b><font color="#228B22">val</font></b> t =(1.0,2.0,~1.2) <b><font color="#228B22">in</font></b> roots t <b><font color="#228B22">end</font></b>;</tt>
<span class="hilite"><i>val it = (0.483239697419,~2.48323969742) : real * real 

- </i></span><tt>Real.fmt (StringCvt.FIX(SOME 3)) (#1 <b><font color="#228B22">let</font></b> <b><font color="#228B22">val</font></b> t =(1.0,2.0,~1.2) <b><font color="#228B22">in</font></b> roots t <b><font color="#228B22">end</font></b>);</tt>
<span class="hilite"><i>val it = "0.483" : string 

- </i></span><tt><b><font color="#228B22">fun</font></b> l (x <b><font color="#228B22">as</font></b> (fst,snd)) = (x,fst div snd);     <b><i><font color="#BB1212">(* layered patterns    *)</font></i></b></tt>
<span class="hilite"><i>val l = fn : int * int -&gt; (int * int) * int 

- </i></span><tt><b><font color="#228B22">fun</font></b> j ((x,y), (a,b,c)) = f(x,y) - g(a,b,c);   <b><i><font color="#BB1212">(* tuples of tuples    *)</font></i></b></tt>
<span class="hilite"><i>val j = fn : (int * int) * (int * int * int) -&gt; int 

- </i></span><tt><b><font color="#228B22">fun</font></b> j (p,t) = f(p) - g(t);                    <b><i><font color="#BB1212">(* simpler alternative *)</font></i></b></tt>
<span class="hilite"><i>val j = fn : (int * int) * (int * int * int) -&gt; int 

- </i></span><tt><b><font color="#228B22">fun</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  tuition {name=_, id=_, courses=nil} = 1000 |</tt>
<span class="hilite"><i>= </i></span><tt>  tuition {courses=[_], ...}          = 2000 |</tt>
<span class="hilite"><i>= </i></span><tt>  tuition {id,...}                    = <b><font color="#228B22">if</font></b> id&gt;500000 <b><font color="#228B22">then</font></b> 5000 <b><font color="#228B22">else</font></b> 4000;</tt>
<span class="hilite"><i>val tuition = fn : {courses:'a list, id:int, name:'b} -&gt; int 

- </i></span><tt><b><font color="#228B22">val</font></b> Norm's_Record = {id=123456, name=<font color="#008B8B">"Norm dePlume"</font>, courses=[<font color="#008B8B">"cse1001"</font>, <font color="#008B8B">"mth1001"</font>]};</tt>
<span class="hilite"><i>val Norm's_Record =
  {courses=["cse1001","mth1001"],id=123456,name="Norm dePlume"}
  : {courses:string list, id:int, name:string} 

- </i></span><tt>tuition Norm's_Record;</tt>
<span class="hilite"><i>val it = 4000 : int 

- </i></span><tt><b><font color="#228B22">fun</font></b> sum (nil) = 0 | sum (head::tail) = head+sum(tail);</tt>
<span class="hilite"><i>val sum = fn : int list -&gt; int 

- </i></span><tt><b><font color="#228B22">fun</font></b>                          <b><i><font color="#BB1212">(* Error! *)</font></i></b></tt>
<span class="hilite"><i>= </i></span><tt> f (x,y)   = x+y+1   |</tt>
<span class="hilite"><i>= </i></span><tt> f (x,y,z) = x+y+z+2 |</tt>
<span class="hilite"><i>= </i></span><tt> f  _      = 3       ;</tt>
<span class="hilite"><i>stdIn:39.1-42.15 Error: parameter or result constraints of clauses don't agree [tycon mismatch]
  this clause:      'Z * 'Y * 'X -&gt; 'W
  previous clauses:      'V * 'U -&gt; 'W
  in declaration:
    f =
      (fn (x,y) =&gt; &lt;exp&gt; + &lt;exp&gt; + 1
        | (x,y,z) =&gt; &lt;exp&gt; + &lt;exp&gt; + 2
        | _ =&gt; 3) 

- </i></span><tt><b><font color="#228B22">fun</font></b> f(0) = <font color="#008B8B">"zero"</font> | f(_) = <font color="#008B8B">"nonzero"</font>;</tt>
<span class="hilite"><i>val f = fn : int -&gt; string 

- </i></span><tt><b><font color="#228B22">fun</font></b> f(_) = <font color="#008B8B">"nonzero"</font> | f(0) = <font color="#008B8B">"zero"</font>;   <b><i><font color="#BB1212">(* Error! *)</font></i></b></tt>
<span class="hilite"><i>stdIn:43.1-43.37 Error: match redundant
          _ =&gt; ...
    --&gt;   0 =&gt; ...
   

- </i></span><tt><b><font color="#228B22">fun</font></b> h (head::rest) = head+1;</tt>
<span class="hilite"><i>stdIn:1.1-2.23 Warning: match nonexhaustive
          head :: rest =&gt; ...
  
val h = fn : int list -&gt; int 

- </i></span><tt>h [3,17,435];</tt>
<span class="hilite"><i>val it = 4 : int 

- </i></span><tt>h (nil);          <b><i><font color="#BB1212">(* We were warned a runtime error possible! *)</font></i></b></tt>
<span class="hilite"><i>
uncaught exception nonexhaustive match failure
  raised at: stdIn:2.17 

- </i></span><tt><b><font color="#228B22">fun</font></b> f (x,y,2) = x+y+2;</tt>
<span class="hilite"><i>stdIn:1.1-2.17 Warning: match nonexhaustive
          (x,y,2) =&gt; ...
  
val f = fn : int * int * int -&gt; int 

- </i></span><tt>f (3,17,2);</tt>
<span class="hilite"><i>val it = 22 : int 

- </i></span><tt>f (1,2,3);    <b><i><font color="#BB1212">(* Error! *)</font></i></b></tt>
<span class="hilite"><i>
uncaught exception nonexhaustive match failure
  raised at: stdIn:2.12 

- </i></span><tt><b><font color="#228B22">fun</font></b> f[x,y,z] = (x,x+y+1,x+y+z+2);</tt>
<span class="hilite"><i>stdIn:1.1-46.10 Warning: match nonexhaustive
          x :: y :: z :: nil =&gt; ...
  
val f = fn : int list -&gt; int * int * int 

- </i></span><tt>f [1,2,3];</tt>
<span class="hilite"><i>val it = (1,4,8) : int * int * int 

- </i></span><tt>f [1,2];     <b><i><font color="#BB1212">(* Error! *)</font></i></b></tt>
<span class="hilite"><i>
uncaught exception nonexhaustive match failure
  raised at: stdIn:2.11 

- </i></span><tt><b><font color="#228B22">let</font></b> <b><font color="#228B22">val</font></b> x=0 <b><font color="#228B22">in</font></b> <b><font color="#228B22">if</font></b> x=0 <b><font color="#228B22">then</font></b> 0 <b><font color="#228B22">else</font></b> 100 div x <b><font color="#228B22">end</font></b>;</tt>
<span class="hilite"><i>val it = 0 : int 

- </i></span><tt><b><font color="#228B22">fun</font></b> If (x,y,z) =  <b><font color="#228B22">if</font></b> x <b><font color="#228B22">then</font></b> y <b><font color="#228B22">else</font></b> z;</tt>
<span class="hilite"><i>val If = fn : bool * 'a * 'a -&gt; 'a 

- </i></span><tt><b><font color="#228B22">let</font></b> <b><font color="#228B22">val</font></b> x=0 <b><font color="#228B22">in</font></b> If (x=0, 0, 100 div x) <b><font color="#228B22">end</font></b>;</tt>
<span class="hilite"><i>
uncaught exception divide by zero
  raised at: &lt;unknown file&gt; 

- </i></span><tt><b><font color="#228B22">infix</font></b> 6 or;</tt>
<span class="hilite"><i>infix 6 or 

- </i></span><tt><b><font color="#228B22">fun</font></b> x or y = x <b><font color="#228B22">orelse</font></b> y;</tt>
<span class="hilite"><i>val or = fn : bool * bool -&gt; bool 

- </i></span><tt><b><font color="#228B22">infix</font></b> 7 &amp;;</tt>
<span class="hilite"><i>infix 7 &amp; 

- </i></span><tt><b><font color="#228B22">fun</font></b> x &amp; y = x <b><font color="#228B22">andalso</font></b> y;   <b><i><font color="#BB1212">(*  &amp; is a symbolic identifier  *)</font></i></b></tt>
<span class="hilite"><i>val &amp; = fn : bool * bool -&gt; bool</i></span>
</pre>

<h3>Polymorphic functions</h3>

<pre class="dialog"><span class="hilite"><i>- </i></span><tt><b><font color="#228B22">fun</font></b> id x = x;</tt>
<span class="hilite"><i>val id = fn : 'a -&gt; 'a 

- </i></span><tt>(id 1, id <font color="#008B8B">"two"</font>);</tt>
<span class="hilite"><i>val it = (1,"two") : int * string 

- </i></span><tt><b><font color="#228B22">fun</font></b> fst (x,y) = x;</tt>
<span class="hilite"><i>val fst = fn : 'a * 'b -&gt; 'a 

- </i></span><tt><b><font color="#228B22">fun</font></b> snd (x,y) = y;</tt>
<span class="hilite"><i>val snd = fn : 'a * 'b -&gt; 'b 

- </i></span><tt>fst (1,<font color="#008B8B">"two"</font>);</tt>
<span class="hilite"><i>val it = 1 : int 

- </i></span><tt>fst ([true, false], 3.14159);</tt>
<span class="hilite"><i>val it = [true,false] : bool list 

- </i></span><tt>fst (1,<font color="#008B8B">"two"</font>) + snd ((1,2), hd [1,2,3]);</tt>
<span class="hilite"><i>val it = 2 : int 

- </i></span><tt>nil;</tt>
<span class="hilite"><i>val it = [] : 'a list 

- </i></span><tt>null;</tt>
<span class="hilite"><i>val it = fn : 'a list -&gt; bool 

- </i></span><tt>hd;</tt>
<span class="hilite"><i>val it = fn : 'a list -&gt; 'a 

- </i></span><tt>tl;</tt>
<span class="hilite"><i>val it = fn : 'a list -&gt; 'a list 

- </i></span><tt><b><font color="#228B22">fun</font></b> switch (x,y) = (y,x);</tt>
<span class="hilite"><i>val switch = fn : 'a * 'b -&gt; 'b * 'a 

- </i></span><tt>switch (2, <font color="#008B8B">"abc"</font>);</tt>
<span class="hilite"><i>val it = ("abc",2) : string * int 

- </i></span><tt>switch (2,3.14159);</tt>
<span class="hilite"><i>val it = (3.14159,2) : real * int 

- </i></span><tt>#2 (switch ([6,9], (<b><font color="#228B22">fn</font></b> x =&gt;x)));</tt>
<span class="hilite"><i>val it = [6,9] : int list 

- </i></span><tt><b><font color="#228B22">fun</font></b> null (nil) = true | null (_::_) = false;</tt>
<span class="hilite"><i>val null = fn : 'a list -&gt; bool 

- </i></span><tt><b><font color="#228B22">fun</font></b> length (x) =</tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">if</font></b> null x <b><font color="#228B22">then</font></b> 0 <b><font color="#228B22">else</font></b> length (tl x) + 1;</tt>
<span class="hilite"><i>val length = fn : 'a list -&gt; int</i></span>
</pre>

<h3>More lists</h3>

Lists are an important data structure in SML; and there are many useful
<a href="http://cm.bell-labs.com/cm/cs/what/smlnj/doc/basis/pages/list.html">predefined functions</a>
for lists.

<pre class="dialog"><span class="hilite"><i>- </i></span><tt><b><font color="#228B22">fun</font></b> member (x, nil) = false | member (x, y::ys) = x=y <b><font color="#228B22">orelse</font></b> member (x,ys);</tt>
<span class="hilite"><i>val member = fn : ''a * ''a list -&gt; bool 

- </i></span><tt>member (<font color="#008B8B">"me"</font>, [<font color="#008B8B">"you"</font>, <font color="#008B8B">"them"</font>, <font color="#008B8B">"me"</font>, <font color="#008B8B">"us"</font>]);</tt>
<span class="hilite"><i>val it = true : bool 

- </i></span><tt>member (<font color="#008B8B">"me"</font>, [<font color="#008B8B">"you"</font>, <font color="#008B8B">"them"</font>, <font color="#008B8B">"us"</font>]);</tt>
<span class="hilite"><i>val it = false : bool 

- </i></span><tt><b><font color="#228B22">fun</font></b> insert (x, nil) = [x]</tt>
<span class="hilite"><i>= </i></span><tt>  | insert (x,y::ys) = <b><font color="#228B22">if</font></b> x&lt;y <b><font color="#228B22">then</font></b> x::y::ys <b><font color="#228B22">else</font></b> y :: insert (x,ys);</tt>
<span class="hilite"><i>val insert = fn : int * int list -&gt; int list 

- </i></span><tt>insert (5, [1,2,3,4,6,7,8,9]);</tt>
<span class="hilite"><i>val it = [1,2,3,4,5,6,7,8,9] : int list 

- </i></span><tt><b><font color="#228B22">fun</font></b> merge (xs,nil) = xs</tt>
<span class="hilite"><i>= </i></span><tt> |  merge (nil,ys) = ys</tt>
<span class="hilite"><i>= </i></span><tt> |  merge (x::xs,y::ys) = <b><font color="#228B22">if</font></b> x&lt;y <b><font color="#228B22">then</font></b> x :: merge(xs,y::ys) <b><font color="#228B22">else</font></b> y :: merge(x::xs,ys);</tt>
<span class="hilite"><i>val merge = fn : int list * int list -&gt; int list 

- </i></span><tt>merge ([1,2,3,4,5,100,102,104,106], [~1,4,10, 20,21,22,105,200]);</tt>
<span class="hilite"><i>val it = [~1,1,2,3,4,4,5,10,20,21,22,100,...] : int list</i></span>
</pre>

<pre class="dialog"><span class="hilite"><i>- </i></span><tt><b><font color="#228B22">local</font></b></tt>
<span class="hilite"><i>= </i></span><tt>   <b><font color="#228B22">fun</font></b> rotate nil = nil | rotate (x::xs) = xs@[x]</tt>
<span class="hilite"><i>= </i></span><tt><b><font color="#228B22">in</font></b></tt>
<span class="hilite"><i>= </i></span><tt>   <b><font color="#228B22">fun</font></b> boundaries l = ListPair.zip (l, rotate l)</tt>
<span class="hilite"><i>= </i></span><tt><b><font color="#228B22">end</font></b>;</tt>
<span class="hilite"><i>val boundaries = fn : 'a list -&gt; ('a * 'a) list 

- </i></span><tt>boundaries nil;</tt>
<span class="hilite"><i>stdIn:18.1-18.15 Warning: type vars not generalized because of
   value restriction are instantiated to dummy types (X1,X2,...)
val it = [] : (?.X1 * ?.X1) list 

- </i></span><tt>boundaries [1];</tt>
<span class="hilite"><i>val it = [(1,1)] : (int * int) list 

- </i></span><tt>boundaries [1,2,3,4,3,2,1];</tt>
<span class="hilite"><i>val it = [(1,2),(2,3),(3,4),(4,3),(3,2),(2,1),(1,1)] : (int * int) list</i></span>
</pre>


<h3>Higher-order functions</h3>

<h4>Functions as arguments</h4>

<pre class="dialog"><span class="hilite"><i>- </i></span><tt><b><font color="#228B22">fun</font></b> apply3 (f) = f(3);</tt>
<span class="hilite"><i>val apply3 = fn : (int -&gt; 'a) -&gt; 'a 

- </i></span><tt><b><font color="#228B22">fun</font></b> fact (n) = <b><font color="#228B22">if</font></b> n=0 <b><font color="#228B22">then</font></b> 1 <b><font color="#228B22">else</font></b> n*fact(n-1);</tt>
<span class="hilite"><i>val fact = fn : int -&gt; int 

- </i></span><tt>apply3 (fact);</tt>
<span class="hilite"><i>val it = 6 : int 

- </i></span><tt>apply3 (<b><font color="#228B22">fn</font></b> x =&gt; x+16);</tt>
<span class="hilite"><i>val it = 19 : int 

- </i></span><tt>apply3 (<b><font color="#228B22">fn</font></b> x =&gt; ({a=x},  true));</tt>
<span class="hilite"><i>val it = ({a=3},true) : {a:int} * bool 

- </i></span><tt><b><font color="#228B22">fun</font></b> min_2 (f,g,x) = Int.min (f x, g x);</tt>
<span class="hilite"><i>val min_2 = fn : ('a -&gt; int) * ('a -&gt; int) * 'a -&gt; int 

- </i></span><tt><b><font color="#228B22">fun</font></b> com_2 (h,f,g,x) = h (f x, g x);</tt>
<span class="hilite"><i>val com_2 = fn : ('a * 'b -&gt; 'c) * ('d -&gt; 'a) * ('d -&gt; 'b) * 'd -&gt; 'c 

- </i></span><tt><b><font color="#228B22">fun</font></b> min_2 (f,g,x) = com_2 (Int.min, f, g, x);</tt>
<span class="hilite"><i>val min_2 = fn : ('a -&gt; int) * ('a -&gt; int) * 'a -&gt; int</i></span>
</pre>

<p>
The key to functional programming is combining functions
with other functions.
What are the correct building blocks?
Look for what is important---reoccuring patterns.
</p><p>
</p><pre class="dialog"><span class="hilite"><i>- </i></span><tt><b><font color="#228B22">fun</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  incr (nil)  = nil |</tt>
<span class="hilite"><i>= </i></span><tt>  incr (h::t) = (h+1) :: incr (t);</tt>
<span class="hilite"><i>val incr = fn : int list -&gt; int list 

- </i></span><tt><b><font color="#228B22">fun</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  half (nil)  = nil |</tt>
<span class="hilite"><i>= </i></span><tt>  half (h::t) = (h/2.0) :: half (t);</tt>
<span class="hilite"><i>val half = fn : real list -&gt; real list 

- </i></span><tt><b><font color="#228B22">val</font></b> f = (<b><font color="#228B22">fn</font></b> x=&gt;x+1);</tt>
<span class="hilite"><i>val f = fn : int -&gt; int 

- </i></span><tt><b><font color="#228B22">fun</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  incr (f,nil) = nil |</tt>
<span class="hilite"><i>= </i></span><tt>  incr (f,h::t)  = f(h) :: incr (f,t);</tt>
<span class="hilite"><i>val incr = fn : ('a -&gt; 'b) * 'a list -&gt; 'b list 

- </i></span><tt><b><font color="#228B22">fun</font></b></tt>
<span class="hilite"><i>= </i></span><tt> map (f,nil)  = nil |</tt>
<span class="hilite"><i>= </i></span><tt> map (f,h::t) = f(h) :: map (f,t);</tt>
<span class="hilite"><i>val map = fn : ('a -&gt; 'b) * 'a list -&gt; 'b list 

- </i></span><tt>map (<b><font color="#228B22">fn</font></b> x=&gt;x+1, [1,2,3,4,5]);  <b><i><font color="#BB1212">(* "map" sucessor func to list *)</font></i></b></tt>
<span class="hilite"><i>val it = [2,3,4,5,6] : int list 

- </i></span><tt><b><font color="#228B22">fun</font></b> incr (list) = map (<b><font color="#228B22">fn</font></b> x=&gt;x+1, list);</tt>
<span class="hilite"><i>val incr = fn : int list -&gt; int list 

- </i></span><tt>incr [1,2,3,4,5];               <b><i><font color="#BB1212">(* new incr behaves as before *)</font></i></b></tt>
<span class="hilite"><i>val it = [2,3,4,5,6] : int list 

- </i></span><tt>map (<b><font color="#228B22">fn</font></b> x=&gt;x/2.0, [2.0, 3.0, 4.0]);</tt>
<span class="hilite"><i>val it = [1.0,1.5,2.0] : real list 

- </i></span><tt><b><font color="#228B22">fun</font></b> half (list) = map (<b><font color="#228B22">fn</font></b> x=&gt;x/2.0, list);</tt>
<span class="hilite"><i>val half = fn : real list -&gt; real list 

- </i></span><tt>half [2.0, 3.0, 4.0];</tt>
<span class="hilite"><i>val it = [1.0,1.5,2.0] : real list 

- </i></span><tt><b><font color="#228B22">fun</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  gt0 (nil)  = nil |</tt>
<span class="hilite"><i>= </i></span><tt>  gt0 (h::t) = <b><font color="#228B22">if</font></b> h&gt;0 <b><font color="#228B22">then</font></b> h::gt0(t) <b><font color="#228B22">else</font></b> gt0(t);</tt>
<span class="hilite"><i>val gt0 = fn : int list -&gt; int list 

- </i></span><tt><b><font color="#228B22">fun</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  eqsq (nil)  = nil |</tt>
<span class="hilite"><i>= </i></span><tt>  eqsq (h::t) = <b><font color="#228B22">if</font></b> h*h=h <b><font color="#228B22">then</font></b> h::eqsq(t) <b><font color="#228B22">else</font></b> eqsq(t);</tt>
<span class="hilite"><i>val eqsq = fn : int list -&gt; int list 

- </i></span><tt><b><font color="#228B22">fun</font></b> filter (f,l) =</tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">if</font></b> null l</tt>
<span class="hilite"><i>= </i></span><tt>    <b><font color="#228B22">then</font></b> []</tt>
<span class="hilite"><i>= </i></span><tt>    <b><font color="#228B22">else</font></b> <b><font color="#228B22">if</font></b> f(hd l)</tt>
<span class="hilite"><i>= </i></span><tt>      <b><font color="#228B22">then</font></b> (hd l)::(filter (f, tl l))</tt>
<span class="hilite"><i>= </i></span><tt>      <b><font color="#228B22">else</font></b> filter (f, tl l);</tt>
<span class="hilite"><i>val filter = fn : ('a -&gt; bool) * 'a list -&gt; 'a list 

- </i></span><tt><b><font color="#228B22">fun</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  filter (f,nil) = nil  |</tt>
<span class="hilite"><i>= </i></span><tt>  filter (f,head::tail) =</tt>
<span class="hilite"><i>= </i></span><tt>    <b><font color="#228B22">if</font></b> f(head)</tt>
<span class="hilite"><i>= </i></span><tt>      <b><font color="#228B22">then</font></b> head::(filter (f, tail))</tt>
<span class="hilite"><i>= </i></span><tt>      <b><font color="#228B22">else</font></b> filter (f, tail);</tt>
<span class="hilite"><i>val filter = fn : ('a -&gt; bool) * 'a list -&gt; 'a list 

- </i></span><tt>filter ((<b><font color="#228B22">fn</font></b> x =&gt; x&gt;0), [~1,0,1]);</tt>
<span class="hilite"><i>val it = [1] : int list 

- </i></span><tt>filter ((<b><font color="#228B22">fn</font></b> x =&gt; x*x=x), [~1,0,1]);</tt>
<span class="hilite"><i>val it = [0,1] : int list</i></span>
</pre>

<h5>Numeric integeration</h5>
<pre class="dialog"><span class="hilite"><i>- </i></span><tt><b><font color="#228B22">fun</font></b> table (a, n, dx, F:real-&gt;real) =</tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">if</font></b> n&lt;0 <b><font color="#228B22">then</font></b> nil <b><font color="#228B22">else</font></b> (a, F a) :: table (a+dx, n-1, dx, F);</tt>
<span class="hilite"><i>val table = fn : real * int * real * (real -&gt; real) -&gt; (real * real) list 

- </i></span><tt>table (0.0, 4, Math.pi/4.0, Math.sin);</tt>
<span class="hilite"><i>val it =
  [(0.0,0.0),(0.785398163397,0.707106781187),(1.57079632679,1.0),
   (2.35619449019,0.707106781187),(3.14159265359,0.0)] : (real * real) list 

- </i></span><tt><b><font color="#228B22">fun</font></b> trapezoid (a, n, dx, F) =</tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">if</font></b> n&lt;=0 <b><font color="#228B22">then</font></b> 0.0 <b><font color="#228B22">else</font></b> dx*(F(a)+F(a+dx))/2.0 + trapezoid (a+dx, n-1, dx, F);</tt>
<span class="hilite"><i>val trapezoid = fn : real * int * real * (real -&gt; real) -&gt; real 

- </i></span><tt>trapezoid (0.0, 4, Math.pi/4.0, Math.sin);</tt>
<span class="hilite"><i>val it = 1.89611889794 : real 

- </i></span><tt>trapezoid (0.0, 400, Math.pi/400.0, Math.sin);</tt>
<span class="hilite"><i>val it = 1.99998971915 : real 

- </i></span><tt>~(Math.cos (Math.pi)) - ~(Math.cos (0.0));  <b><i><font color="#BB1212">(* integral of sin is -cos *)</font></i></b></tt>
<span class="hilite"><i>val it = 2.0 : real</i></span>
</pre>

<h4>Returning functions</h4>

<pre class="dialog"><span class="hilite"><i>- </i></span><tt>Int.fmt StringCvt.HEX 1200;    <b><i><font color="#BB1212">(* format an integer               *)</font></i></b></tt>
<span class="hilite"><i>val it = "4b0" : string 

- </i></span><tt>(Int.fmt StringCvt.HEX) 1200;  <b><i><font color="#BB1212">(* application is left associative *)</font></i></b></tt>
<span class="hilite"><i>val it = "4b0" : string 

- </i></span><tt>Int.fmt StringCvt.HEX;         <b><i><font color="#BB1212">(* function to format an integer *)</font></i></b></tt>
<span class="hilite"><i>val it = fn : int -&gt; string 

- </i></span><tt>Int.fmt;                       <b><i><font color="#BB1212">(* notice that "-&gt;" is right associative *)</font></i></b></tt>
<span class="hilite"><i>val it = fn : StringCvt.radix -&gt; int -&gt; string 

- </i></span><tt>StringCvt.padLeft #<font color="#008B8B">" "</font> 8 (Int.fmt StringCvt.HEX 1200);</tt>
<span class="hilite"><i>val it = "     4b0" : string 

- </i></span><tt>StringCvt.padLeft #<font color="#008B8B">" "</font> 8;</tt>
<span class="hilite"><i>val it = fn : string -&gt; string 

- </i></span><tt>StringCvt.padLeft #<font color="#008B8B">" "</font>;</tt>
<span class="hilite"><i>val it = fn : int -&gt; string -&gt; string 

- </i></span><tt>StringCvt.padLeft;</tt>
<span class="hilite"><i>val it = fn : char -&gt; int -&gt; string -&gt; string 

- </i></span><tt><b><font color="#228B22">val</font></b> min = (<b><font color="#228B22">fn</font></b> x =&gt; <b><font color="#228B22">fn</font></b> y =&gt; Int.min (x,y));</tt>
<span class="hilite"><i>val min = fn : int -&gt; int -&gt; int 

- </i></span><tt><b><font color="#228B22">fun</font></b> min x = (<b><font color="#228B22">fn</font></b> y =&gt; Int.min (x,y));</tt>
<span class="hilite"><i>val min = fn : int -&gt; int -&gt; int 

- </i></span><tt><b><font color="#228B22">fun</font></b> min x y = Int.min (x,y);</tt>
<span class="hilite"><i>val min = fn : int -&gt; int -&gt; int</i></span>
</pre>

"blob" "blob" is now easy to understand -- function, argument, function application.
Now we have "blob" "blob" "blob" and this looks odd at first.
Of course, it is really ("blob" "blob") "blob" which is clearly <em>two</em> function applications.
But we have something completely different from ordinary imperative langauges
here:
("blob" "blob") is an expressions that must evaluate to a function.
In order for it to be applied to an argument it must be a function.
Happily, the basic rewriting rules (replacing equals by equals) still holds.
We will be able to define functions
<tt>
fun f pat pat = splat
</tt>,
and then
<tt>f blob blob</tt> can be replaced by <tt>splat</tt>.

<p>

(Unfortunately <em>value polymorphism</em> gets in the way of the main
point that <tt>fun</tt> and <tt>val</tt> are all the same.
See <a href="http://www.smlnj.org//doc/Conversion/types.html#Value">Types and Type Checking</a> by McQueen.)

</p><pre class="dialog"><span class="hilite"><i>- </i></span><tt><b><font color="#228B22">val</font></b> const7 = (<b><font color="#228B22">fn</font></b> x =&gt; <b><font color="#228B22">fn</font></b> y =&gt; 7);  <b><i><font color="#BB1212">(* Several ways to define the same thing ... *)</font></i></b></tt>
<span class="hilite"><i>val const7 = fn : 'a -&gt; 'b -&gt; int 

- </i></span><tt><b><font color="#228B22">fun</font></b> const7 x = (<b><font color="#228B22">fn</font></b> y =&gt; 7);    </tt>
<span class="hilite"><i>val const7 = fn : 'a -&gt; 'b -&gt; int 

- </i></span><tt><b><font color="#228B22">fun</font></b> const7 x y = 7;</tt>
<span class="hilite"><i>val const7 = fn : 'a -&gt; 'b -&gt; int 

- </i></span><tt><b><font color="#228B22">fun</font></b> const7 _ _ = 7;</tt>
<span class="hilite"><i>val const7 = fn : 'a -&gt; 'b -&gt; int 

- </i></span><tt>Compiler.Control.valueRestrictionTopWarn := false;</tt>
<span class="hilite"><i>val it = () : unit 

- </i></span><tt>const7 ();  const7 nil;  const7 3;  const7 <font color="#008B8B">"a"</font>; <b><i><font color="#BB1212">(*  Think of these as functions: 'a-&gt;int  *)</font></i></b></tt>
<span class="hilite"><i>val it = fn : ?.X1 -&gt; int
val it = fn : ?.X1 -&gt; int
val it = fn : ?.X1 -&gt; int
val it = fn : ?.X1 -&gt; int 

- </i></span><tt>const7 nil <font color="#008B8B">"abc"</font>;</tt>
<span class="hilite"><i>val it = 7 : int 

- </i></span><tt>const7 nil 3.4;</tt>
<span class="hilite"><i>val it = 7 : int 

- </i></span><tt>const7 () <font color="#008B8B">"abc"</font>;</tt>
<span class="hilite"><i>val it = 7 : int 

- </i></span><tt>const7 () 3.4;</tt>
<span class="hilite"><i>val it = 7 : int 

- </i></span><tt>const7 <font color="#008B8B">"xyz"</font> [1,2];</tt>
<span class="hilite"><i>val it = 7 : int 

- </i></span><tt><b><font color="#228B22">fun</font></b> const x = (<b><font color="#228B22">fn</font></b> _ =&gt; x);</tt>
<span class="hilite"><i>val const = fn : 'a -&gt; 'b -&gt; 'a 

- </i></span><tt><b><font color="#228B22">fun</font></b> const x _ = x;</tt>
<span class="hilite"><i>val const = fn : 'a -&gt; 'b -&gt; 'a 

- </i></span><tt>const nil <font color="#008B8B">"abc"</font>;</tt>
<span class="hilite"><i>val it = [] : ?.X1 list 

- </i></span><tt>const nil 3.4;</tt>
<span class="hilite"><i>val it = [] : ?.X1 list 

- </i></span><tt>const () <font color="#008B8B">"abc"</font>;</tt>
<span class="hilite"><i>val it = () : unit 

- </i></span><tt>const () 3.4;</tt>
<span class="hilite"><i>val it = () : unit 

- </i></span><tt>const <font color="#008B8B">"xyz"</font> [1,2];</tt>
<span class="hilite"><i>val it = "xyz" : string</i></span>
</pre>

<pre class="dialog"><span class="hilite"><i>- </i></span><tt><b><font color="#228B22">fun</font></b> f (x) = (<b><font color="#228B22">fn</font></b> (y,z) =&gt; <b><font color="#228B22">if</font></b> x=0 <b><font color="#228B22">then</font></b> y+z <b><font color="#228B22">else</font></b> x*(y+z));</tt>
<span class="hilite"><i>val f = fn : int -&gt; int * int -&gt; int 

- </i></span><tt>f (2);</tt>
<span class="hilite"><i>val it = fn : int * int -&gt; int 

- </i></span><tt>f (2) (5,8);</tt>
<span class="hilite"><i>val it = 26 : int 

- </i></span><tt>f (0) (5,8);</tt>
<span class="hilite"><i>val it = 13 : int 

- </i></span><tt><b><font color="#228B22">fun</font></b> f (x) (y,z) = <b><font color="#228B22">if</font></b> x=0 <b><font color="#228B22">then</font></b> y+z <b><font color="#228B22">else</font></b> x*(y+z);</tt>
<span class="hilite"><i>val f = fn : int -&gt; int * int -&gt; int</i></span>
</pre>

<p>
Here is a function to determine arithmetic sequences
from geometric sequences.
It returns the sequence, ie., the function from natural
numbers to integers that generates each element of the sequence.
</p><pre class="dialog"><span class="hilite"><i>- </i></span><tt><b><font color="#228B22">fun</font></b> sequence (x <b><font color="#228B22">as</font></b> a::b::c::_) =</tt>
<span class="hilite"><i>= </i></span><tt><b><font color="#228B22">let</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">val</font></b> ab = b-a <b><font color="#228B22">and</font></b> bc = c-b</tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">val</font></b> r1 = b div a <b><font color="#228B22">and</font></b> r2 = c div b;</tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">fun</font></b> guess n = List.nth (x, n)</tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">fun</font></b> arith 0 = a | arith n = arith (n-1) + ab;</tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">fun</font></b> geom  0 = a | geom  n = geom (n-1) * r1;</tt>
<span class="hilite"><i>= </i></span><tt><b><font color="#228B22">in</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">if</font></b> ab=bc <b><font color="#228B22">then</font></b> arith <b><font color="#228B22">else</font></b> <b><font color="#228B22">if</font></b> r1=r2 <b><font color="#228B22">then</font></b> geom <b><font color="#228B22">else</font></b> guess</tt>
<span class="hilite"><i>= </i></span><tt><b><font color="#228B22">end</font></b>;</tt>
<span class="hilite"><i>stdIn:13.1-22.4 Warning: match nonexhaustive
          x as a :: b :: c :: _ =&gt; ...
  
val sequence = fn : int list -&gt; int -&gt; int 

- </i></span><tt><b><font color="#228B22">val</font></b> f = sequence [4,5,6,7,8,9];</tt>
<span class="hilite"><i>val f = fn : int -&gt; int 

- </i></span><tt>f 3; f 4; f 5; f 6;</tt>
<span class="hilite"><i>val it = 7 : int
val it = 8 : int
val it = 9 : int
val it = 10 : int 

- </i></span><tt><b><font color="#228B22">val</font></b> f = sequence [1,2,4,8,16];</tt>
<span class="hilite"><i>val f = fn : int -&gt; int 

- </i></span><tt>f 3; f 4; f 5; f 6;</tt>
<span class="hilite"><i>val it = 8 : int
val it = 16 : int
val it = 32 : int
val it = 64 : int</i></span>
</pre>

<p>
Higher-order functions, polymorphism and lists go together well.
</p><pre class="dialog"><span class="hilite"><i>- </i></span><tt><b><font color="#228B22">fun</font></b> map f nil = nil | map f (x::xs) = (f x)::(map f xs);</tt>
<span class="hilite"><i>val map = fn : ('a -&gt; 'b) -&gt; 'a list -&gt; 'b list 

- </i></span><tt><b><font color="#228B22">fun</font></b> filter p nil = nil | filter p (x::xs) = <b><font color="#228B22">if</font></b> p x <b><font color="#228B22">then</font></b> x::(filter p xs) <b><font color="#228B22">else</font></b> filter p xs;</tt>
<span class="hilite"><i>val filter = fn : ('a -&gt; bool) -&gt; 'a list -&gt; 'a list 

- </i></span><tt><b><font color="#228B22">fun</font></b> exists p nil = false | exists p (x::xs) = (p x) <b><font color="#228B22">orelse</font></b> (exists p xs);</tt>
<span class="hilite"><i>val exists = fn : ('a -&gt; bool) -&gt; 'a list -&gt; bool 

- </i></span><tt><b><font color="#228B22">fun</font></b> all p nil = true | all p (x::xs) = (p x) <b><font color="#228B22">andalso</font></b> (all p xs);</tt>
<span class="hilite"><i>val all = fn : ('a -&gt; bool) -&gt; 'a list -&gt; bool 

- </i></span><tt><b><font color="#228B22">fun</font></b> all p xs = not (exists (not o p) xs);</tt>
<span class="hilite"><i>val all = fn : ('a -&gt; bool) -&gt; 'a list -&gt; bool 

- </i></span><tt><b><font color="#228B22">fun</font></b> fold f ie nil = ie</tt>
<span class="hilite"><i>= </i></span><tt>  | fold f ie (x::xs) = f (x, fold f ie xs);</tt>
<span class="hilite"><i>val fold = fn : ('a * 'b -&gt; 'b) -&gt; 'b -&gt; 'a list -&gt; 'b 

- </i></span><tt>fold (<b><font color="#228B22">op</font></b> +) 0  [1,2,3,4,5,6,7,8,9];</tt>
<span class="hilite"><i>val it = 45 : int 

- </i></span><tt>fold (<b><font color="#228B22">op</font></b> ^) <font color="#008B8B">""</font> [<font color="#008B8B">"a"</font>,<font color="#008B8B">"bc"</font>,<font color="#008B8B">"def"</font>,<font color="#008B8B">""</font>,<font color="#008B8B">"ghij"</font>];</tt>
<span class="hilite"><i>val it = "abcdefghij" : string 

- </i></span><tt>foldr (<b><font color="#228B22">op</font></b> @) nil [[1],[2,3],[4,5,6],[],[7,8,9,0]];  <b><i><font color="#BB1212">(* foldr predefined *)</font></i></b></tt>
<span class="hilite"><i>val it = [1,2,3,4,5,6,7,8,9,0] : int list 

- </i></span><tt><b><font color="#228B22">fun</font></b> revf f ie l =</tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">if</font></b> null(l)</tt>
<span class="hilite"><i>= </i></span><tt>    <b><font color="#228B22">then</font></b> ie</tt>
<span class="hilite"><i>= </i></span><tt>    <b><font color="#228B22">else</font></b> revf f (tl l) (f (hd l, ie));</tt>
<span class="hilite"><i>val revf = fn : ('a * 'a list -&gt; 'a list) -&gt; 'a list -&gt; 'a list -&gt; 'a list 

- </i></span><tt><b><font color="#228B22">fun</font></b> revf f ie nil = ie</tt>
<span class="hilite"><i>= </i></span><tt>  | revf f ie (y::ys) = revf f (f (y,ie)) ys;</tt>
<span class="hilite"><i>val revf = fn : ('a * 'b -&gt; 'b) -&gt; 'b -&gt; 'a list -&gt; 'b 

- </i></span><tt>revf (<b><font color="#228B22">op</font></b> +) 0 [1,2,3,4,5,6,7,8,9];</tt>
<span class="hilite"><i>val it = 45 : int 

- </i></span><tt>revf (<b><font color="#228B22">op</font></b> ^) <font color="#008B8B">""</font> [<font color="#008B8B">"a"</font>,<font color="#008B8B">"bc"</font>,<font color="#008B8B">"def"</font>,<font color="#008B8B">""</font>,<font color="#008B8B">"ghij"</font>];</tt>
<span class="hilite"><i>val it = "ghijdefbca" : string 

- </i></span><tt>foldl (<b><font color="#228B22">op</font></b> @) nil [[1],[2,3],[4,5,6],[],[7,8,9,0]];  <b><i><font color="#BB1212">(* foldl predefined *)</font></i></b></tt>
<span class="hilite"><i>val it = [7,8,9,0,4,5,6,2,3,1] : int list</i></span>
</pre>

Composition is another example of a higher-order function.
<pre class="dialog"><span class="hilite"><i>- </i></span><tt><b><font color="#228B22">fun</font></b> comp (f,g) = (<b><font color="#228B22">fn</font></b> x =&gt; f (g (x)));</tt>
<span class="hilite"><i>val comp = fn : ('a -&gt; 'b) * ('c -&gt; 'a) -&gt; 'c -&gt; 'b 

- </i></span><tt><b><font color="#228B22">fun</font></b> comp (f,g) (x) = f(g(x));</tt>
<span class="hilite"><i>val comp = fn : ('a -&gt; 'b) * ('c -&gt; 'a) -&gt; 'c -&gt; 'b 

- </i></span><tt><b><font color="#228B22">val</font></b> f = comp (Math.sin, Math.cos);</tt>
<span class="hilite"><i>val f = fn : real -&gt; real 

- </i></span><tt><b><font color="#228B22">val</font></b> g = Math.sin o Math.cos;        <b><i><font color="#BB1212">(*  Composition "o" is predefined  *)</font></i></b></tt>
<span class="hilite"><i>val g = fn : real -&gt; real 

- </i></span><tt>f(0.25);</tt>
<span class="hilite"><i>val it = 0.824270418114 : real 

- </i></span><tt>g(0.25);</tt>
<span class="hilite"><i>val it = 0.824270418114 : real</i></span>
</pre>

The functions <tt>twin</tt> and <tt>fourtimes</tt> 
are defined using composition.

<pre class="dialog"><span class="hilite"><i>- </i></span><tt><b><font color="#228B22">local</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">fun</font></b> search (n,i) =  i*i&lt;=n <b><font color="#228B22">andalso</font></b> (n mod i = 0 <b><font color="#228B22">orelse</font></b> search (n,i+1));</tt>
<span class="hilite"><i>= </i></span><tt><b><font color="#228B22">in</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">fun</font></b> composite n = search (n,2);   <b><i><font color="#BB1212">(* search for a divisor *)</font></i></b></tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">fun</font></b> prime n = not (composite n)</tt>
<span class="hilite"><i>= </i></span><tt><b><font color="#228B22">end</font></b>;</tt>
<span class="hilite"><i>val composite = fn : int -&gt; bool
val prime = fn : int -&gt; bool 

- </i></span><tt>prime 3797;</tt>
<span class="hilite"><i>val it = true : bool 

- </i></span><tt>prime 87187;</tt>
<span class="hilite"><i>val it = true : bool 

- </i></span><tt>prime (87187 * 3797);</tt>
<span class="hilite"><i>val it = false : bool 

- </i></span><tt>composite (87187 * 3797);</tt>
<span class="hilite"><i>val it = true : bool 

- </i></span><tt>prime 99989;</tt>
<span class="hilite"><i>val it = true : bool 

- </i></span><tt>prime 99991;</tt>
<span class="hilite"><i>val it = true : bool 

- </i></span><tt><b><font color="#228B22">local</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">fun</font></b> pair p = (p, p+2);</tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">fun</font></b> both_prime (p,q) = prime p <b><font color="#228B22">andalso</font></b> prime q;</tt>
<span class="hilite"><i>= </i></span><tt><b><font color="#228B22">in</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  <b><font color="#228B22">val</font></b> twin = both_prime o pair</tt>
<span class="hilite"><i>= </i></span><tt><b><font color="#228B22">end</font></b>;</tt>
<span class="hilite"><i>val twin = fn : int -&gt; bool 

- </i></span><tt>twin 99719;</tt>
<span class="hilite"><i>val it = true : bool 

- </i></span><tt>twin 99989;</tt>
<span class="hilite"><i>val it = true : bool 

- </i></span><tt><b><font color="#228B22">val</font></b> times = (<b><font color="#228B22">fn</font></b> x =&gt; (<b><font color="#228B22">fn</font></b> y =&gt; x * y));</tt>
<span class="hilite"><i>val times = fn : int -&gt; int -&gt; int 

- </i></span><tt><b><font color="#228B22">fun</font></b> times x = (<b><font color="#228B22">fn</font></b> y =&gt; x * y);</tt>
<span class="hilite"><i>val times = fn : int -&gt; int -&gt; int 

- </i></span><tt><b><font color="#228B22">fun</font></b> times x y = x*y;</tt>
<span class="hilite"><i>val times = fn : int -&gt; int -&gt; int 

- </i></span><tt>times 3 4;</tt>
<span class="hilite"><i>val it = 12 : int 

- </i></span><tt>times 2;                  <b><i><font color="#BB1212">(* Partial application              *)</font></i></b></tt>
<span class="hilite"><i>val it = fn : int -&gt; int 

- </i></span><tt><b><font color="#228B22">val</font></b> twice = times 2;      <b><i><font color="#BB1212">(* Func twice define w/o using vars *)</font></i></b></tt>
<span class="hilite"><i>val twice = fn : int -&gt; int 

- </i></span><tt>twice 5;                  <b><i><font color="#BB1212">(* Example use of twice.            *)</font></i></b></tt>
<span class="hilite"><i>val it = 10 : int 

- </i></span><tt><b><font color="#228B22">val</font></b> fourtimes = twice o twice;      <b><i><font color="#BB1212">(* Defined w/o vars *)</font></i></b></tt>
<span class="hilite"><i>val fourtimes = fn : int -&gt; int 

- </i></span><tt>fourtimes 5;              <b><i><font color="#BB1212">(* Example use of fourtimes.        *)</font></i></b></tt>
<span class="hilite"><i>val it = 20 : int 

- </i></span><tt>times;</tt>
<span class="hilite"><i>val it = fn : int -&gt; int -&gt; int 

- </i></span><tt><b><font color="#228B22">op</font></b> *;</tt>
<span class="hilite"><i>val it = fn : int * int -&gt; int 

- </i></span><tt><b><font color="#228B22">val</font></b> hex = Int.fmt StringCvt.HEX; <b><i><font color="#BB1212">(* Convert int to hex string *)</font></i></b></tt>
<span class="hilite"><i>val hex = fn : int -&gt; string 

- </i></span><tt><b><font color="#228B22">val</font></b> pad8 = StringCvt.padLeft #<font color="#008B8B">" "</font> 8; <b><i><font color="#BB1212">(* Pad left with blanks  *)</font></i></b></tt>
<span class="hilite"><i>val pad8 = fn : string -&gt; string 

- </i></span><tt><b><font color="#228B22">fun</font></b> format n = pad8 (hex n);</tt>
<span class="hilite"><i>val format = fn : int -&gt; string 

- </i></span><tt><b><font color="#228B22">val</font></b> format = pad8 o hex;  <b><i><font color="#BB1212">(* predefined, binary, infix "o"    *)</font></i></b></tt>
<span class="hilite"><i>val format = fn : int -&gt; string 

- </i></span><tt><b><font color="#228B22">val</font></b> curry = (<b><font color="#228B22">fn</font></b> f =&gt; (<b><font color="#228B22">fn</font></b> a =&gt; <b><font color="#228B22">fn</font></b> b =&gt; f(a,b)));</tt>
<span class="hilite"><i>val curry = fn : ('a * 'b -&gt; 'c) -&gt; 'a -&gt; 'b -&gt; 'c 

- </i></span><tt><b><font color="#228B22">fun</font></b> curry (f) (a) (b) = f(a,b);</tt>
<span class="hilite"><i>val curry = fn : ('a * 'b -&gt; 'c) -&gt; 'a -&gt; 'b -&gt; 'c 

- </i></span><tt><b><font color="#228B22">fun</font></b> plus (x,y) = x + y;</tt>
<span class="hilite"><i>val plus = fn : int * int -&gt; int 

- </i></span><tt><b><font color="#228B22">val</font></b> curryplus = curry plus;</tt>
<span class="hilite"><i>val curryplus = fn : int -&gt; int -&gt; int 

- </i></span><tt><b><font color="#228B22">val</font></b> curryplus = curry (<b><font color="#228B22">op</font></b> +);  <b><i><font color="#BB1212">(*  "op" keyword turns off infix *)</font></i></b></tt>
<span class="hilite"><i>val curryplus = fn : int -&gt; int -&gt; int 

- </i></span><tt><b><font color="#228B22">val</font></b> successor = curryplus 1;</tt>
<span class="hilite"><i>val successor = fn : int -&gt; int 

- </i></span><tt><b><font color="#228B22">val</font></b> succ = plus 1;        <b><i><font color="#BB1212">(* type error! *)</font></i></b></tt>
<span class="hilite"><i>stdIn:54.1-54.18 Error: operator and operand don't agree [literal]
  operator domain: int * int
  operand:         int
  in expression:
    plus 1 

- </i></span><tt><b><font color="#228B22">val</font></b> succ = (<b><font color="#228B22">fn</font></b> x =&gt; plus (1,x));</tt>
<span class="hilite"><i>val succ = fn : int -&gt; int 

- </i></span><tt>Compiler.Control.valueRestrictionTopWarn := false;</tt>
<span class="hilite"><i>val it = () : unit 

- </i></span><tt><b><font color="#228B22">val</font></b> len = List.foldl (<b><font color="#228B22">fn</font></b> (_,n) =&gt; n+1) 0;</tt>
<span class="hilite"><i>val len = fn : ?.X1 list -&gt; int 

- </i></span><tt><b><font color="#228B22">fun</font></b> len l = List.foldl (<b><font color="#228B22">fn</font></b> (_,n) =&gt; n+1) 0;  <b><i><font color="#BB1212">(* eta expansion *)</font></i></b></tt>
<span class="hilite"><i>val len = fn : 'a -&gt; 'b list -&gt; int 

- </i></span><tt><b><font color="#228B22">fun</font></b> uncurry f (a,b) = f a b;</tt>
<span class="hilite"><i>val uncurry = fn : ('a -&gt; 'b -&gt; 'c) -&gt; 'a * 'b -&gt; 'c</i></span>
</pre>

Functions that return functions allow the programmer
to combine functions to make new functions.
Higher-order utility functions capture the common patterns
and can be specialized to perform customized operations.

<pre class="dialog"><span class="hilite"><i>- </i></span><tt><b><font color="#228B22">fun</font></b> map f nil = nil</tt>
<span class="hilite"><i>= </i></span><tt> |  map f (x::xs) = (f x) :: map f xs;</tt>
<span class="hilite"><i>val map = fn : ('a -&gt; 'b) -&gt; 'a list -&gt; 'b list 

- </i></span><tt>map real;</tt>
<span class="hilite"><i>val it = fn : int list -&gt; real list 

- </i></span><tt>map real [1,2,3,4,5,6];</tt>
<span class="hilite"><i>val it = [1.0,2.0,3.0,4.0,5.0,6.0] : real list 

- </i></span><tt><b><font color="#228B22">fun</font></b> f g (x,y) = (x,g(y));</tt>
<span class="hilite"><i>val f = fn : ('a -&gt; 'b) -&gt; 'c * 'a -&gt; 'c * 'b 

- </i></span><tt>map (f (<b><font color="#228B22">fn</font></b> x=&gt;x+1)) [(<font color="#008B8B">"a"</font>,1),(<font color="#008B8B">"b"</font>,2),(<font color="#008B8B">"c"</font>,2)];</tt>
<span class="hilite"><i>val it = [("a",2),("b",3),("c",3)] : (string * int) list 

- </i></span><tt><b><font color="#228B22">fun</font></b></tt>
<span class="hilite"><i>= </i></span><tt>  filter f (nil)        = nil  |</tt>
<span class="hilite"><i>= </i></span><tt>  filter f (head::tail) =</tt>
<span class="hilite"><i>= </i></span><tt>    <b><font color="#228B22">if</font></b> f(head) <b><font color="#228B22">then</font></b> head::(filter f tail) <b><font color="#228B22">else</font></b> filter f tail;</tt>
<span class="hilite"><i>val filter = fn : ('a -&gt; bool) -&gt; 'a list -&gt; 'a list 

- </i></span><tt>filter (<b><font color="#228B22">fn</font></b> x =&gt; x&gt;0 <b><font color="#228B22">andalso</font></b> x*x=x);</tt>
<span class="hilite"><i>val it = fn : int list -&gt; int list 

- </i></span><tt>filter Real.&gt;;</tt>
<span class="hilite"><i>val it = fn : (real * real) list -&gt; (real * real) list 

- </i></span><tt>filter Real.&gt; [(1.0,2.0),(2.0,1.0),(Math.pi,Math.e)];</tt>
<span class="hilite"><i>val it = [(2.0,1.0),(3.14159265359,2.71828182846)] : (real * real) list 

- </i></span><tt>filter Real.&lt; [(1.0,2.0),(2.0,1.0),(Math.pi,Math.e)];</tt>
<span class="hilite"><i>val it = [(1.0,2.0)] : (real * real) list 

- </i></span><tt><b><font color="#228B22">fun</font></b> merge p (xs,nil) = xs</tt>
<span class="hilite"><i>= </i></span><tt> |  merge p (nil,ys) = ys</tt>
<span class="hilite"><i>= </i></span><tt> |  merge p (x::xs,y::ys) =</tt>
<span class="hilite"><i>= </i></span><tt>   <b><font color="#228B22">if</font></b> p(x,y) <b><font color="#228B22">then</font></b> x :: merge p (xs,y::ys) <b><font color="#228B22">else</font></b> y :: merge p (x::xs,ys);</tt>
<span class="hilite"><i>val merge = fn : ('a * 'a -&gt; bool) -&gt; 'a list * 'a list -&gt; 'a list 

- </i></span><tt>merge Real.&gt;;</tt>
<span class="hilite"><i>val it = fn : real list * real list -&gt; real list 

- </i></span><tt>merge Int.&lt;;</tt>
<span class="hilite"><i>val it = fn : int list * int list -&gt; int list 

- </i></span><tt>merge Int.&lt; ([1,2,3,99,100],[1,2,3,49,50]);</tt>
<span class="hilite"><i>val it = [1,1,2,2,3,3,49,50,99,100] : int list 

- </i></span><tt>merge Int.&gt; (rev [1,2,3,99,100], rev [1,2,3,49,50]);</tt>
<span class="hilite"><i>val it = [100,99,50,49,3,3,2,2,1,1] : int list</i></span>
</pre>

<h2>User defined data types</h2>

<pre class="dialog"><span class="hilite"><i>- </i></span><tt><b><font color="#228B22">datatype</font></b> color = Red | Blue | Green;</tt>
<span class="hilite"><i>datatype color = Blue | Green | Red 

- </i></span><tt>Blue;  Red;  Green;</tt>
<span class="hilite"><i>val it = Blue : color
val it = Red : color
val it = Green : color 

- </i></span><tt><b><font color="#228B22">datatype</font></b> bool = true | false;</tt>
<span class="hilite"><i>datatype bool = false | true 

- </i></span><tt><b><font color="#228B22">fun</font></b> not (true) = false | not (false) = true;</tt>
<span class="hilite"><i>val not = fn : bool -&gt; bool 

- </i></span><tt><b><font color="#228B22">datatype</font></b> numbs = i <b><font color="#228B22">of</font></b> int | r <b><font color="#228B22">of</font></b> real;</tt>
<span class="hilite"><i>datatype numbs = i of int | r of real 

- </i></span><tt>[i 3, r 3.4, i 5, i 9, r 5.4];</tt>
<span class="hilite"><i>val it = [i 3,r 3.4,i 5,i 9,r 5.4] : numbs list 

- </i></span><tt><b><font color="#228B22">fun</font></b> isum nil = 0</tt>
<span class="hilite"><i>= </i></span><tt>  | isum ((i n)::rest) = n+(isum rest) | isum (_::rest) = isum (rest);</tt>
<span class="hilite"><i>val isum = fn : numbs list -&gt; int 

- </i></span><tt><b><font color="#228B22">datatype</font></b> shape = Rectangle <b><font color="#228B22">of</font></b> real*real | Circle <b><font color="#228B22">of</font></b> real | Line <b><font color="#228B22">of</font></b> (real*real)list</tt>
<span class="hilite"><i>= </i></span><tt>   | Spline <b><font color="#228B22">of</font></b> (real*real)list;</tt>
<span class="hilite"><i>datatype shape
  = Circle of real
  | Line of (real * real) list
  | Rectangle of real * real
  | Spline of (real * real) list 

- </i></span><tt>Circle (1.2);  Circle (3.4);</tt>
<span class="hilite"><i>val it = Circle 1.2 : shape
val it = Circle 3.4 : shape 

- </i></span><tt>Rectangle (4.3, 1.9);  Rectangle (40.3, ~8.345);</tt>
<span class="hilite"><i>val it = Rectangle (4.3,1.9) : shape
val it = Rectangle (40.3,~8.345) : shape 

- </i></span><tt>Line [(1.1, 2.2)];  Line [];</tt>
<span class="hilite"><i>val it = Line [(1.1,2.2)] : shape
val it = Line [] : shape 

- </i></span><tt><b><font color="#228B22">datatype</font></b> ilist = inil | cons <b><font color="#228B22">of</font></b> int * ilist;</tt>
<span class="hilite"><i>datatype ilist = cons of int * ilist | inil 

- </i></span><tt><b><font color="#228B22">datatype</font></b> itree = empty | node <b><font color="#228B22">of</font></b> int * itree * itree;</tt>
<span class="hilite"><i>datatype itree = empty | node of int * itree * itree 

- </i></span><tt><b><font color="#228B22">datatype</font></b></tt>
<span class="hilite"><i>= </i></span><tt>   stmt = Assign | Block <b><font color="#228B22">of</font></b> block</tt>
<span class="hilite"><i>= </i></span><tt><b><font color="#228B22">and</font></b></tt>
<span class="hilite"><i>= </i></span><tt>   block = Begin <b><font color="#228B22">of</font></b> stmt list;</tt>
<span class="hilite"><i>datatype stmt = Assign | Block of block
datatype block = Begin of stmt list 

- </i></span><tt>Assign;</tt>
<span class="hilite"><i>val it = Assign : stmt 

- </i></span><tt>Block (Begin [Assign]);  Block (Begin [Assign, Assign]);</tt>
<span class="hilite"><i>val it = Block (Begin [Assign]) : stmt
val it = Block (Begin [Assign,Assign]) : stmt 

- </i></span><tt><b><font color="#228B22">datatype</font></b> 'a option = NONE | SOME <b><font color="#228B22">of</font></b> 'a;  <b><i><font color="#BB1212">(* predefined in structure Option *)</font></i></b></tt>
<span class="hilite"><i>datatype 'a option = NONE | SOME of 'a 

- </i></span><tt><b><font color="#228B22">datatype</font></b> 'a glist = gnil | cons <b><font color="#228B22">of</font></b> 'a * 'a glist;</tt>
<span class="hilite"><i>datatype 'a glist = cons of 'a * 'a glist | gnil 

- </i></span><tt><b><font color="#228B22">datatype</font></b> 'a binary_tree = empty | node <b><font color="#228B22">of</font></b> 'a * 'a binary_tree * 'a binary_tree;</tt>
<span class="hilite"><i>datatype 'a binary_tree = empty | node of 'a * 'a binary_tree * 'a binary_tree 

- </i></span><tt><b><font color="#228B22">datatype</font></b> ('a,'b) union =InLeft <b><font color="#228B22">of</font></b> 'a | InRight <b><font color="#228B22">of</font></b> 'b;</tt>
<span class="hilite"><i>datatype ('a,'b) union = InLeft of 'a | InRight of 'b 

- </i></span><tt>InLeft(3); InRight (true); InLeft(<font color="#008B8B">"s"</font>);</tt>
<span class="hilite"><i>val it = InLeft 3 : (int,'a) union
val it = InRight true : ('a,bool) union
val it = InLeft "s" : (string,'a) union 

- </i></span><tt>[InLeft(3), InRight (true)];</tt>
<span class="hilite"><i>val it = [InLeft 3,InRight true] : (int,bool) union list 

- </i></span><tt>[InLeft(3), InRight (true), InLeft(<font color="#008B8B">"s"</font>)];  <b><i><font color="#BB1212">(* type error *)</font></i></b></tt>
<span class="hilite"><i>stdIn:40.1-40.41 Error: operator and operand don't agree [literal]
  operator domain: (int,'Z) union * (int,'Z) union list
  operand:         (int,'Z) union * (string,bool) union list
  in expression:
    InLeft 3 :: InRight true :: InLeft "s" :: nil</i></span>
</pre>


</body></html>